

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Table of Contents &mdash; CENT System 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CENT System 1.0.1 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="#">CENT System 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="table-of-contents">
<h1><a class="toc-backref" href="#id12">Table of Contents</a><a class="headerlink" href="#table-of-contents" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="id1">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#table-of-contents" id="id12">Table of Contents</a></li>
<li><a class="reference internal" href="#cent-application-user-s-documentation" id="id13">CENT Application - User&#8217;s Documentation</a><ul>
<li><a class="reference internal" href="#system-overview" id="id14"><strong>System Overview</strong></a><ul>
<li><a class="reference internal" href="#what-is-cent" id="id15"><strong>What is CENT?</strong></a></li>
<li><a class="reference internal" href="#installation" id="id16"><strong>Installation</strong></a></li>
<li><a class="reference internal" href="#cent-application-usage" id="id17"><strong>CENT Application Usage</strong></a><ul>
<li><a class="reference internal" href="#application-start" id="id18">Application Start</a></li>
<li><a class="reference internal" href="#backup-settings" id="id19">Backup Settings</a></li>
<li><a class="reference internal" href="#backup-under-the-hood" id="id20">Backup under the hood</a></li>
<li><a class="reference internal" href="#openvibe-console-output" id="id21">OpenViBE Console Output</a></li>
<li><a class="reference internal" href="#patient-information-gathering" id="id22">Patient Information Gathering</a></li>
<li><a class="reference internal" href="#openvibe-scenario-group-selection" id="id23">OpenViBE Scenario Group selection</a></li>
<li><a class="reference internal" href="#eeg-cap-setup" id="id24">EEG Cap Setup</a></li>
<li><a class="reference internal" href="#baseline-measurement" id="id25">Baseline Measurement</a></li>
<li><a class="reference internal" href="#game-selection" id="id26">Game Selection</a></li>
<li><a class="reference internal" href="#gameplay" id="id27">Gameplay</a></li>
<li><a class="reference internal" href="#game-summary" id="id28">Game Summary</a></li>
<li><a class="reference internal" href="#session-summary" id="id29">Session Summary</a></li>
<li><a class="reference internal" href="#patient-s-evaluation" id="id30">Patient&#8217;s Evaluation</a></li>
<li><a class="reference internal" href="#end-session" id="id31">End Session</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-tool" id="id32"><strong>Mapping Tool</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#openvibe-as-a-digital-signal-processor-in-cent" id="id33"><strong>OpenViBE as a Digital Signal Processor in CENT</strong></a><ul>
<li><a class="reference internal" href="#how-openvibe-is-used-by-cent-system" id="id34"><strong>How OpenViBE is used by CENT System?</strong></a></li>
<li><a class="reference internal" href="#protocols-development" id="id35"><strong>Protocols Development</strong></a><ul>
<li><a class="reference internal" href="#environment-variables" id="id36"><strong>Environment Variables</strong></a></li>
<li><a class="reference internal" href="#available-scenarios" id="id37">Available Scenarios</a></li>
<li><a class="reference internal" href="#scenarios-requirements" id="id38">Scenarios requirements</a><ul>
<li><a class="reference internal" href="#monitoring-and-noise-scenario" id="id39">Monitoring and noise scenario</a></li>
<li><a class="reference internal" href="#baseline-scenario" id="id40">Baseline scenario</a></li>
<li><a class="reference internal" href="#generate-configuration-scenario" id="id41">Generate configuration scenario</a></li>
<li><a class="reference internal" href="#game-scenario" id="id42">Game scenario</a></li>
</ul>
</li>
<li><a class="reference internal" href="#channel-scenarios" id="id43">8 channel scenarios</a></li>
<li><a class="reference internal" href="#adding-scenario-groups" id="id44">Adding scenario groups</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#supported-eeg-devices" id="id45"><strong>Supported EEG Devices</strong></a><ul>
<li><a class="reference internal" href="#starlab-enobio" id="id46"><strong>Starlab® Enobio</strong></a><ul>
<li><a class="reference internal" href="#general-information" id="id47">General Information</a></li>
<li><a class="reference internal" href="#id4" id="id48">Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-eeg-devices" id="id49"><strong>Other EEG Devices</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-acquisition-server-collect-samples" id="id50"><strong>How Acquisition Server collect samples</strong></a></li>
<li><a class="reference internal" href="#patient-data-storage" id="id51"><strong>Patient data storage</strong></a><ul>
<li><a class="reference internal" href="#id6" id="id52"><strong>General information</strong></a></li>
<li><a class="reference internal" href="#privacy-security-and-it-s-limitations" id="id53"><strong>Privacy security and it&#8217;s limitations</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#added-functionality-for-trainers" id="id54"><strong>Added Functionality for Trainers</strong></a><ul>
<li><a class="reference internal" href="#recap-visualisations" id="id55"><strong>Recap Visualisations</strong></a></li>
<li><a class="reference internal" href="#reject-game-trial" id="id56"><strong>Reject Game Trial</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#cent-application-developer-s-documentation" id="id57">CENT Application - Developer&#8217;s Documentation</a><ul>
<li><a class="reference internal" href="#cent-zip-packages" id="id58"><strong>CENT ZIP Packages</strong></a></li>
<li><a class="reference internal" href="#development-environment-setup" id="id59"><strong>Development Environment Setup</strong></a><ul>
<li><a class="reference internal" href="#required-software" id="id60"><strong>Required Software</strong></a></li>
<li><a class="reference internal" href="#required-system-variables" id="id61"><strong>Required System Variables</strong></a></li>
<li><a class="reference internal" href="#getting-the-code" id="id62"><strong>Getting the Code</strong></a><ul>
<li><a class="reference internal" href="#getting-the-code-as-an-archive" id="id63"><strong>Getting the code as an archive</strong></a></li>
<li><a class="reference internal" href="#checkout-from-git" id="id64"><strong>Checkout from GIT</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#build-instructions" id="id65"><strong>Build Instructions</strong></a><ul>
<li><a class="reference internal" href="#build-cent-qt-application" id="id66">Build CENT Qt Application</a></li>
<li><a class="reference internal" href="#build-openvibe-on-windows" id="id67">Build OpenViBE on Windows</a></li>
<li><a class="reference internal" href="#build-an-openvibe-box" id="id68">Build an OpenViBE Box</a></li>
<li><a class="reference internal" href="#build-openvibe-acquisition-server-with-starlab-enobio-driver" id="id69">Build OpenViBE Acquisition Server with Starlab® Enobio® Driver</a></li>
<li><a class="reference internal" href="#build-qwt" id="id70">Build Qwt</a></li>
<li><a class="reference internal" href="#installer-build" id="id71"><strong>Installer Build</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cent-games-development" id="id72"><strong>CENT Games Development</strong></a><ul>
<li><a class="reference internal" href="#currently-available-games" id="id73"><strong>Currently Available Games</strong></a><ul>
<li><a class="reference internal" href="#simple-ball-game" id="id74">Simple Ball Game</a></li>
<li><a class="reference internal" href="#empty-ball-game" id="id75">Empty Ball Game</a></li>
<li><a class="reference internal" href="#media-game" id="id76">Media Game</a></li>
<li><a class="reference internal" href="#astrocomet-game" id="id77">AstroComet Game</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tutorial" id="id78"><strong>Tutorial</strong></a></li>
<li><a class="reference internal" href="#location-for-the-games-data" id="id79"><strong>Location for the Games&#8217; Data</strong></a></li>
<li><a class="reference internal" href="#cent-games-api" id="id80"><strong>CENT Games API</strong></a><ul>
<li><a class="reference internal" href="#general-information-and-requirements" id="id81">General Information and Requirements</a></li>
<li><a class="reference internal" href="#cent-interface-for-new-games" id="id82">CENT Interface for New Games</a></li>
<li><a class="reference internal" href="#cent-data-structres" id="id83">CENT Data Structres</a></li>
<li><a class="reference internal" href="#tutorial-for-cent-games-developers" id="id84">Tutorial for CENT Games Developers</a></li>
<li><a class="reference internal" href="#adding-game-to-cent" id="id85">Adding Game to CENT</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#eeg-cap-drivers-development" id="id86"><strong>EEG Cap Drivers Development</strong></a><ul>
<li><a class="reference internal" href="#overview" id="id87"><strong>Overview</strong></a></li>
<li><a class="reference internal" href="#data-structures" id="id88"><strong>Data Structures</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-a" id="id89">Appendix A</a><ul>
<li><a class="reference internal" href="#building-cent-application-end-user-s-notes" id="id90"><strong>Building CENT Application - End User&#8217;s Notes</strong></a><ul>
<li><a class="reference internal" href="#building-the-platform" id="id91"><strong>Building the Platform</strong></a><ul>
<li><a class="reference internal" href="#cent-application" id="id92">CENT Application</a></li>
<li><a class="reference internal" href="#openvibe-libraries" id="id93">OpenVIBE &amp; Libraries</a></li>
<li><a class="reference internal" href="#installer" id="id94">Installer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-logs" id="id95"><strong>Build Logs</strong></a><ul>
<li><a class="reference internal" href="#cent-platform-build-log" id="id96">CENT Platform Build Log</a></li>
<li><a class="reference internal" href="#cent-installer-build-log" id="id97">CENT Installer Build Log</a></li>
<li><a class="reference internal" href="#cent-games-build-log" id="id98">CENT Games Build Log</a></li>
<li><a class="reference internal" href="#enobio-api-build-log" id="id99">Enobio API Build Log</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-b" id="id100">Appendix B</a><ul>
<li><a class="reference internal" href="#developing-for-cent-end-user-s-notes" id="id101"><strong>Developing for CENT - End User&#8217;s Notes</strong></a><ul>
<li><a class="reference internal" href="#game-plugin-development" id="id102"><strong>Game Plugin Development</strong></a><ul>
<li><a class="reference internal" href="#setting-up-a-plugin-development" id="id103">Setting up a plugin development</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-functionality-via-menu-tools" id="id104"><strong>Adding Functionality via Menu Tools</strong></a><ul>
<li><a class="reference internal" href="#creating-launcher-add-ons-for-cent" id="id105">Creating &#8216;Launcher&#8217; add-ons for CENT</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#launcher-add-on-log" id="id106"><strong>Launcher Add-on Log</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-c" id="id107">Appendix C</a><ul>
<li><a class="reference internal" href="#general-notes-on-cent-machines-of-hy" id="id108"><strong>General Notes on CENT Machines of HY</strong></a><ul>
<li><a class="reference internal" href="#sources-of-trouble-vpn-uac" id="id109"><strong>Sources of trouble: VPN &amp; UAC</strong></a></li>
<li><a class="reference internal" href="#trick-for-getting-a-cached-w7-account-back" id="id110"><strong>Trick for getting a cached W7 account back</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="cent-application-user-s-documentation">
<h1><a class="toc-backref" href="#id13">CENT Application - User&#8217;s Documentation</a><a class="headerlink" href="#cent-application-user-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>by Robert Rabenel &amp; BLStream colleagues.</p>
<div class="section" id="system-overview">
<h2><a class="toc-backref" href="#id14"><strong>System Overview</strong></a><a class="headerlink" href="#system-overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="what-is-cent">
<h3><a class="toc-backref" href="#id15"><strong>What is CENT?</strong></a><a class="headerlink" href="#what-is-cent" title="Permalink to this headline">¶</a></h3>
<p>CENT (Computer Enabled Neuroplasticity Treatment) is an application for a novel treatment method for various brain diseases, esspecially Attention Deficit Hyperactivity Disorder (ADHD). CENT is monitoring patient&#8217;s brain activity and using different visual stimulations, encouraging patients to alter their brain activities. This treatment is devoid of any side effects and has long-term effectiveness.</p>
</div>
<div class="section" id="installation">
<h3><a class="toc-backref" href="#id16"><strong>Installation</strong></a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">CENT works on <em>Windows 7</em>, on both <em>32 bit</em> and <em>64 bit</em> architectures. Recommended is <em>Windows 7, 64 bit</em>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Before following installation steps, make sure that your EEG Cap drivers are installed. More about that in <a class="reference internal" href="#supported-eeg-devices"><em>Supported EEG Devices</em></a> section.</p>
</div>
<p>These instructions describe how to install <strong>CENT Application</strong>:</p>
<ol class="arabic simple">
<li>CENT uses OpenViBE platform. It has to be downloaded from <a class="reference external" href="http://openvibe.inria.fr/downloads">http://openvibe.inria.fr/downloads</a> and installed first (for documentation look at <a class="reference external" href="http://openvibe.inria.fr">http://openvibe.inria.fr</a>).</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Remember location of the OpenViBE installation folder, you will need that information during CENT installation.</p>
</div>
<ol class="arabic simple" start="2">
<li>Install CENT Application from <strong>CENTInstaller.msi</strong></li>
</ol>
<p>CENT installer will guide you through the installation process. One important thing to underline is, that at some point you will be asked to indicate where OpenViBE is installed.</p>
<img alt="_images/OpenVibeInstallationFolder.PNG" class="align-center" src="_images/OpenVibeInstallationFolder.PNG" />
<ol class="arabic simple" start="3">
<li>At this point you are ready to start CENT application.</li>
</ol>
</div>
<div class="section" id="cent-application-usage">
<h3><a class="toc-backref" href="#id17"><strong>CENT Application Usage</strong></a><a class="headerlink" href="#cent-application-usage" title="Permalink to this headline">¶</a></h3>
<div class="section" id="application-start">
<h4><a class="toc-backref" href="#id18">Application Start</a><a class="headerlink" href="#application-start" title="Permalink to this headline">¶</a></h4>
<p>CENT application, when started, will present Select Cap Drivers window. The choice we have two cap drivers 4 and 8 channels.</p>
<img alt="_images/SelectCapDriver.PNG" class="align-center" src="_images/SelectCapDriver.PNG" />
<p>For 8 channels cap driver we have to set MAC address needed to run (it&#8217;s not possible go to next step without MAC address). MAC is store in memory.</p>
<img alt="_images/SelectCapDriverWithMAC.PNG" class="align-center" src="_images/SelectCapDriverWithMAC.PNG" />
<p>Application is designed to work with two monitors - patient&#8217;s and therapist&#8217;s. CENT application, will present two similar windows - first on therapist&#8217;s monitor, second - on patient&#8217;s. Both windows have a name in the window header, so they can be recognized.</p>
<img alt="_images/WindowsHeaders.PNG" class="align-center" src="_images/WindowsHeaders.PNG" />
<p>Those windows are not independent - any activities will affect both of them. For example &#8220;Start&#8221; button in patient&#8217;s or therapist&#8217;s window will switch to the next step on both windows.</p>
</div>
<div class="section" id="backup-settings">
<h4><a class="toc-backref" href="#id19">Backup Settings</a><a class="headerlink" href="#backup-settings" title="Permalink to this headline">¶</a></h4>
<p>To choose backup location therapist have to open settings (<em>Tool-&gt;Settings</em>). In new window click &#8220;Change&#8221; and choose destination directory. This is a one-way synchronization of patient&#8217;s data (whole <em>Patients</em> directory - <tt class="docutils literal"><span class="pre">My</span> <span class="pre">Documents\CENT\Patients</span></tt>). Backup is incremental, so locally deleted files won&#8217;t be removed from the backup.</p>
<img alt="_images/Backup.PNG" class="align-center" src="_images/Backup.PNG" />
</div>
<div class="section" id="backup-under-the-hood">
<h4><a class="toc-backref" href="#id20">Backup under the hood</a><a class="headerlink" href="#backup-under-the-hood" title="Permalink to this headline">¶</a></h4>
<p>This information might be usefull if you happen to have trouble with the backup functionality. Underneath Cent uses <tt class="docutils literal"><span class="pre">robocopy</span></tt> cmd utility provided with Windows 7. The backup is invoked after every new file created. Failures are silent (only logs). The command used is: <tt class="docutils literal"><span class="pre">ROBOCOPY</span> <span class="pre">[source]</span> <span class="pre">[destination]</span> <span class="pre">/S</span> <span class="pre">/LOG:robocopy.log</span></tt>. It goes without saying that the user that runs Cent, has to have appropriate write access on the destination path.</p>
</div>
<div class="section" id="openvibe-console-output">
<h4><a class="toc-backref" href="#id21">OpenViBE Console Output</a><a class="headerlink" href="#openvibe-console-output" title="Permalink to this headline">¶</a></h4>
<p>More advanced users of the CENT System, especially those creating new signal processing schemes, may benefit from the insight into the more detailed messages about the internal happenings. To open OpenViBE Console use <em>Debug-&gt;OpenViBE Console Output</em> in application menu. It will open new window with two tabs which will let you see messages comming from the Acquisition Server and from the OpenViBE Designer running in the background.</p>
<img alt="_images/Console.png" class="align-center" src="_images/Console.png" />
</div>
<div class="section" id="patient-information-gathering">
<h4><a class="toc-backref" href="#id22">Patient Information Gathering</a><a class="headerlink" href="#patient-information-gathering" title="Permalink to this headline">¶</a></h4>
<p>After clicking on &#8220;Start&#8221; there will be next page regarding patient&#8217;s information. First patient type her/his name and last name. There are allowed letters, numbers and &#8216;_&#8217; character. Click &#8220;Continue&#8221; for next page. If it is new patient you have to choose IEP folder if it does not exist in patient directory. The IEP folder should contain:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">IEP\class_beta.cfg</span></tt></li>
<li><tt class="docutils literal"><span class="pre">IEP\class_theta.cfg</span></tt></li>
<li><tt class="docutils literal"><span class="pre">IEP\default_baseline\thetabase.cfg</span></tt></li>
<li><tt class="docutils literal"><span class="pre">IEP\default_baseline\betabase.cfg</span></tt></li>
<li><tt class="docutils literal"><span class="pre">IEP\default_baseline\baseline_spectrum.csv</span></tt></li>
</ul>
<img alt="_images/NameLastName.PNG" class="align-center" src="_images/NameLastName.PNG" />
<p>Next step is about the quality of the last night&#8217;s sleep. Patient should provide his last night&#8217;s sleep duration (max 24) and information about how much time elapsed since he woke up (maximum 72). Click &#8220;Continue&#8221; for next page or get back to patient&#8217;s name screen with &#8220;Back&#8221; button.</p>
<img alt="_images/Hours.PNG" class="align-center" src="_images/Hours.PNG" />
<p>Motivation plays an important factor. In the next screen patient needs to ask himself how motivated to do the session she/he feels.</p>
<img alt="_images/Motivated.PNG" class="align-center" src="_images/Motivated.PNG" />
<p>Patient&#8217;s mood follows - patient have to choose one of nine characters:</p>
<img alt="_images/Mood.PNG" class="align-center" src="_images/Mood.PNG" />
<p>And the last thing is to choose how excited patient feels today - patient have to choose one of nine characters:</p>
<img alt="_images/Excited.PNG" class="align-center" src="_images/Excited.PNG" />
<p>At this point, patient or therapist can start the session with &#8220;Start session&#8221; button.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Information about the patient - hours of sleep, mood, excitement, etc. are saved in a text file:</p>
<p><tt class="docutils literal"><span class="pre">My</span> <span class="pre">Documents\CENT\Patients\[OBFUSCATED_PATIENT_NAME]\session_[DATESTAMP]\patient_condition.txt</span></tt></p>
<p class="last">For more information about patient data see <a class="reference internal" href="#patient-data-storage"><em>Patient data storage</em></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Patient&#8217;s name is obfuscated to secure his privacy. There is a separate tool (<a class="reference internal" href="#mapping-tool"><em>Mapping Tool</em></a>)  provided, which is able to deobfuscate those names. This application is available only to designated people.</p>
</div>
</div>
<div class="section" id="openvibe-scenario-group-selection">
<h4><a class="toc-backref" href="#id23">OpenViBE Scenario Group selection</a><a class="headerlink" href="#openvibe-scenario-group-selection" title="Permalink to this headline">¶</a></h4>
<p>On the next page, therapist must choose scenario group. CENT application is using OpenViBE scenario files to process EEG signals. Different scenarios may be in use, depending on the used EEG cap, and other factors. To add new scenario group you have to create new directory in <tt class="docutils literal"><span class="pre">[CENT_INSTALLED_FOLDER]\scenarios</span></tt>. Directory name will be used as a name of the scenario group.</p>
<img alt="_images/ScenarioGroup.PNG" class="align-center" src="_images/ScenarioGroup.PNG" />
</div>
<div class="section" id="eeg-cap-setup">
<h4><a class="toc-backref" href="#id24">EEG Cap Setup</a><a class="headerlink" href="#eeg-cap-setup" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This information is for Enobio® device but other devices could be similar</p>
</div>
<p>Patient have to put Enobio® cap on his/her head. Then therapist attach the Enobio® to the cap using the velcro. The next thing therapist place holders in the cap holes, insert the gel and plug the electrodes. Therapist can also put dry electrodes on the headband. There is also one electrode for a right ear. The last thing to do is to plug the USB reciver into the computer. More information you find in device manual.</p>
<img alt="_images/PlaceElectrodes.PNG" class="align-center" src="_images/PlaceElectrodes.PNG" />
</div>
<div class="section" id="baseline-measurement">
<h4><a class="toc-backref" href="#id25">Baseline Measurement</a><a class="headerlink" href="#baseline-measurement" title="Permalink to this headline">¶</a></h4>
<p>When EEG Cap is correctly placed and connected, therapist can proceed to the baseline measurement. Therapist must enter measurement time and ask patient to look at the cross in the center of the window.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Therapist should observe noise level indicatior to be able to decide if measurement should be taken again.</p>
</div>
<img alt="_images/BaseLine.PNG" class="align-center" src="_images/BaseLine.PNG" />
<p>4 channels noise level.</p>
<img alt="_images/BaseLine8Ch.PNG" class="align-center" src="_images/BaseLine8Ch.PNG" />
<p>8 channels noise level.</p>
<p>Therapist can end baseline measurement earlier than specified using &#8220;End recording&#8221; button.</p>
<p>After baseline measurment, therapist will be presented with the EEG signal power spectrum and calculated Beta and Theta power values. At this point therapist should enter coefficients for both of those power bands, as well as information about duration of the game that will follow.</p>
<img alt="_images/BaseLineResults.PNG" class="align-center" src="_images/BaseLineResults.PNG" />
</div>
<div class="section" id="game-selection">
<h4><a class="toc-backref" href="#id26">Game Selection</a><a class="headerlink" href="#game-selection" title="Permalink to this headline">¶</a></h4>
<p>After baseline measurement, CENT is expecting patient or therapist to choose a game which will be played during the session. List of available games will be presented in both windows. Each game has a tutorial which explains the rules of the game.</p>
<img alt="_images/ChooseGame.PNG" class="align-center" src="_images/ChooseGame.PNG" />
</div>
<div class="section" id="gameplay">
<h4><a class="toc-backref" href="#id27">Gameplay</a><a class="headerlink" href="#gameplay" title="Permalink to this headline">¶</a></h4>
<p>During the game therapist can observe EEG chart on his window. Patient should focus on the game. Game will end after pressing &#8220;End game&#8221; button on therapist window or after some time which was set by therapist.</p>
</div>
<div class="section" id="game-summary">
<h4><a class="toc-backref" href="#id28">Game Summary</a><a class="headerlink" href="#game-summary" title="Permalink to this headline">¶</a></h4>
<p>After the game result charts will be presented in both windows. Each bar on the chart represents percentage of the time spent in positive classification (desired state of mind). Patient can play again or change the game. Therapist can also get back to the baseline results to change parameters or show session summary.</p>
<img alt="_images/PerformanceStatistics.PNG" class="align-center" src="_images/PerformanceStatistics.PNG" />
</div>
<div class="section" id="session-summary">
<h4><a class="toc-backref" href="#id29">Session Summary</a><a class="headerlink" href="#session-summary" title="Permalink to this headline">¶</a></h4>
<p>Whole session consisting of number of the games is summarized in similar way. On this chart, each bar represents percentage of the time spent in positive classification (desired state of mind) during the sessions (one bar for all the games playd within one session).</p>
<img alt="_images/SessionFeedback.PNG" class="align-center" src="_images/SessionFeedback.PNG" />
</div>
<div class="section" id="patient-s-evaluation">
<h4><a class="toc-backref" href="#id30">Patient&#8217;s Evaluation</a><a class="headerlink" href="#patient-s-evaluation" title="Permalink to this headline">¶</a></h4>
<p>After the session patient is asked two follow up questions.</p>
<img alt="_images/Evaluation.PNG" class="align-center" src="_images/Evaluation.PNG" />
<img alt="_images/Evaluation2.PNG" class="align-center" src="_images/Evaluation2.PNG" />
</div>
<div class="section" id="end-session">
<h4><a class="toc-backref" href="#id31">End Session</a><a class="headerlink" href="#end-session" title="Permalink to this headline">¶</a></h4>
<p>Session may be ended with &#8220;End session&#8221; button. After that CENT application will present first screen, starting whole process from the beginning.</p>
<img alt="_images/EndSession.PNG" class="align-center" src="_images/EndSession.PNG" />
</div>
</div>
<div class="section" id="mapping-tool">
<span id="id2"></span><h3><a class="toc-backref" href="#id32"><strong>Mapping Tool</strong></a><a class="headerlink" href="#mapping-tool" title="Permalink to this headline">¶</a></h3>
<p>Mapping Tool is a command line application which creates mapping between hashes and real patient&#8217;s names. To use it, one shall execute  it in the command line console, indicating localization of the folder with patients data:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">MappingTool.exe</span> <span class="pre">K:\\PatientsFolder</span></tt></div></blockquote>
<p>Application will create a text file in current directory. File will follow simple structure:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">[patient</span> <span class="pre">name];[encrypted</span> <span class="pre">patient</span> <span class="pre">name]</span></tt></div></blockquote>
<p>You will find MappingTool in <em>MappingToolPackage.zip</em>. It is accompanied by <em>QtCore4.dll</em>, which is required to run this application.</p>
</div>
</div>
<div class="section" id="openvibe-as-a-digital-signal-processor-in-cent">
<h2><a class="toc-backref" href="#id33"><strong>OpenViBE as a Digital Signal Processor in CENT</strong></a><a class="headerlink" href="#openvibe-as-a-digital-signal-processor-in-cent" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-openvibe-is-used-by-cent-system">
<h3><a class="toc-backref" href="#id34"><strong>How OpenViBE is used by CENT System?</strong></a><a class="headerlink" href="#how-openvibe-is-used-by-cent-system" title="Permalink to this headline">¶</a></h3>
<p>CENT application uses OpenViBE platform to process data from the EEG device. OpenViBE runs in the background with preselected scenarios. CENT starts OpenViBE when needed - while processing data from EEG device, during baseline measurement and when patient plays the game. There are different scenarios used for the baseline measurement and for the gameplay.</p>
</div>
<div class="section" id="protocols-development">
<h3><a class="toc-backref" href="#id35"><strong>Protocols Development</strong></a><a class="headerlink" href="#protocols-development" title="Permalink to this headline">¶</a></h3>
<div class="section" id="environment-variables">
<h4><a class="toc-backref" href="#id36"><strong>Environment Variables</strong></a><a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>&#8220;CENT_CURRENT_PATIENT&#8221;; - variable to Patient&#8217;s folder: <tt class="docutils literal"><span class="pre">My</span> <span class="pre">Documents\CENT\Patients\[CUR_PAT]</span></tt></li>
<li>&#8220;CENT_CURRENT_SESSION&#8221;; - variable to Patient&#8217;s current session folder:   <tt class="docutils literal"><span class="pre">My</span> <span class="pre">Documents\CENT\Patients\CUR_PAT]\session_[DATESTAMP]</span></tt></li>
<li>&#8220;CENT_CURRENT_GAME&#8221;; - variable to Patient&#8217;s current game folder:   <tt class="docutils literal"><span class="pre">My</span> <span class="pre">Documents\CENT\Patients\CUR_PAT]\session_[DATESTAMP]\games\[GAME_NAME]_[DATESTAMP]</span></tt></li>
<li>&#8220;CENT_SCENARIOS_HOME&#8221;; - variable to CENT scenarios: <tt class="docutils literal"><span class="pre">[CENT_INSTALLED_FOLDER]\scenarios\[SCENARIO_GROUP_NAME]</span></tt></li>
<li>&#8220;OPENVIBE_HOME&#8221;; - variable to OpenViBE install folder</li>
</ul>
</div>
<div class="section" id="available-scenarios">
<h4><a class="toc-backref" href="#id37">Available Scenarios</a><a class="headerlink" href="#available-scenarios" title="Permalink to this headline">¶</a></h4>
<p>All scenarios used by CENT application are stored in <tt class="docutils literal"><span class="pre">[CENT_INSTALLED_FOLDER]\scenarios\[SCENARIO_GROUP_NAME]</span></tt>.</p>
<dl class="docutils">
<dt>Every group scenario has to have these four scenarios:</dt>
<dd><ol class="first last arabic simple">
<li>cent_monitoring_and_noise.xml</li>
<li>cent_baseline.xml</li>
<li>cent_generate_configuration.xml</li>
<li>cent_game.xml</li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="scenarios-requirements">
<h4><a class="toc-backref" href="#id38">Scenarios requirements</a><a class="headerlink" href="#scenarios-requirements" title="Permalink to this headline">¶</a></h4>
<p>Every scenario needs two boxes for the Cent to be able to stop it cleanly.</p>
<img alt="_images/CentTerminateScenarioBoxes.png" src="_images/CentTerminateScenarioBoxes.png" />
<p>Their configuration is as follows:</p>
<img alt="_images/OVCentVRPNClientConf.png" src="_images/OVCentVRPNClientConf.png" />
<img alt="_images/OVTerminateScenarioConf.png" src="_images/OVTerminateScenarioConf.png" />
<div class="section" id="monitoring-and-noise-scenario">
<h5><a class="toc-backref" href="#id39">Monitoring and noise scenario</a><a class="headerlink" href="#monitoring-and-noise-scenario" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>This scenario is expected to provide live EEG signal and live noise level information, both through VRPN Analog Servers. Noise level is passed through 5 channels that are:</dt>
<dd><ol class="first last arabic simple">
<li>Current noise value</li>
<li>Noise threshold1</li>
<li>Noise threshold2</li>
<li>Min value</li>
<li>Max value</li>
</ol>
</dd>
</dl>
<p>The servers are called accordingly: <strong>liveEEG</strong>, <strong>CENTNoiseLevel</strong></p>
<p>Most scenarios will usually use Aquisition client to get EEG data, but it is not a requirement.</p>
</div>
<div class="section" id="baseline-scenario">
<h5><a class="toc-backref" href="#id40">Baseline scenario</a><a class="headerlink" href="#baseline-scenario" title="Permalink to this headline">¶</a></h5>
<p>It is supposed to create a <tt class="docutils literal"><span class="pre">[{CENT_CURRENT_SESSION}]\baseline_spectrum.csv</span></tt> spectrum file and two intermediate files used by next scenario. These file are <tt class="docutils literal"><span class="pre">[{CENT_CURRENT_SESSION}]\betaval.csv</span></tt> and <tt class="docutils literal"><span class="pre">[{CENT_CURRENT_SESSION}]\thetaval.csv</span></tt>.
It is also expected to provide live EEG signal and live noise level information, like the previous one.</p>
<p>Here the CENT VRPN Client is slightly extended to the base one. Additional stimulations can be used in stream switch box.</p>
<img alt="_images/OVBaselineVRPNClientConf.png" src="_images/OVBaselineVRPNClientConf.png" />
</div>
<div class="section" id="generate-configuration-scenario">
<h5><a class="toc-backref" href="#id41">Generate configuration scenario</a><a class="headerlink" href="#generate-configuration-scenario" title="Permalink to this headline">¶</a></h5>
<p>This one has to create two files used by next scenario. These file are <tt class="docutils literal"><span class="pre">[{CENT_CURRENT_SESSION}]\betabase.cfg</span></tt> and <tt class="docutils literal"><span class="pre">[{CENT_CURRENT_SESSION}]\thetabase.cfg</span></tt>.</p>
</div>
<div class="section" id="game-scenario">
<h5><a class="toc-backref" href="#id42">Game scenario</a><a class="headerlink" href="#game-scenario" title="Permalink to this headline">¶</a></h5>
<p>Main functionality of this scenario is to provide classification outcome and epoch notificatio through VRPN Button Server configured as follows:</p>
<img alt="_images/OVCENTControlStreamConf.png" src="_images/OVCENTControlStreamConf.png" />
<p>The epoch notification is like a beacon informing about new classification to overcome the limitation of VRPN Button Server that is notifying the client only on value change.
One way is to do it via Lua script like that:</p>
<div class="highlight-lua"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">dofile</span><span class="p">(</span><span class="nb">os.getenv</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">OPENVIBE_HOME&quot;</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&quot;</span><span class="s">/share/openvibe-plugins/stimulation/lua-stimulator-stim-codes.lua&quot;</span><span class="p">)</span>

<span class="n">stim</span> <span class="o">=</span> <span class="n">OVTK_StimulationId_Label_00</span>
<span class="c1">-- this function is called when the box is initialized</span>
<span class="k">function</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
	<span class="nb">io.write</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">initialize has been called</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

	<span class="c1">-- inspects the box topology</span>
<span class="c1">--	io.write(string.format(&quot;box has %i input(s)\n&quot;, box:get_input_count()))</span>
<span class="c1">--	io.write(string.format(&quot;box has %i output(s)\n&quot;, box:get_output_count()))</span>
<span class="c1">--	io.write(string.format(&quot;box has %i setting(s)\n&quot;, box:get_setting_count()))</span>
<span class="c1">--	for i = 1, box:get_setting_count() do</span>
<span class="c1">--		io.write(string.format(&quot; - setting %i has value [%s]\n&quot;, i, box:get_setting(i)))</span>
<span class="c1">--	end</span>

<span class="k">end</span>

<span class="c1">-- this function is called when the box is uninitialized</span>
<span class="k">function</span> <span class="nf">uninitialize</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
	<span class="nb">io.write</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">uninitialize has been called</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- this function is called once by the box</span>
<span class="k">function</span> <span class="nf">process</span><span class="p">(</span><span class="n">box</span><span class="p">)</span>
	<span class="nb">io.write</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">process has been called</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>

	<span class="c1">-- enters infinite loop</span>
	<span class="c1">-- cpu will be released with a call to sleep</span>
	<span class="c1">-- at the end of the loop</span>
	<span class="k">while</span> <span class="kc">true</span> <span class="k">do</span>

		<span class="c1">-- gets current simulated time</span>
		<span class="n">t</span> <span class="o">=</span> <span class="n">box</span><span class="p">:</span><span class="n">get_current_time</span><span class="p">()</span>

		<span class="k">if</span> <span class="n">box</span><span class="p">:</span><span class="n">get_stimulation_count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span> <span class="k">then</span> <span class="c1">-- stimulation received</span>
			<span class="n">box</span><span class="p">:</span><span class="n">send_stimulation</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">stim</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">stim</span> <span class="o">==</span> <span class="n">OVTK_StimulationId_Label_00</span> <span class="k">then</span>
				<span class="n">stim</span> <span class="o">=</span> <span class="n">OVTK_StimulationId_Label_01</span>
			<span class="k">else</span>
				<span class="n">stim</span> <span class="o">=</span> <span class="n">OVTK_StimulationId_Label_00</span>
			<span class="k">end</span>
			<span class="n">box</span><span class="p">:</span><span class="n">remove_stimulation</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="k">end</span>
		<span class="c1">-- releases cpu</span>
		<span class="n">box</span><span class="p">:</span><span class="n">sleep</span><span class="p">()</span>
	<span class="k">end</span>
<span class="k">end</span>
</pre></div>
</td></tr></table></div>
<dl class="docutils">
<dt>Another important thing is to publish Current theta/beta powers through 4 Analog channels of VRPN server called <strong>CENTInGamePowerLevel</strong>. These channels are:</dt>
<dd><ol class="first last arabic simple">
<li>theta value</li>
<li>theta extent</li>
<li>beta value</li>
<li>beta extent</li>
</ol>
</dd>
</dl>
<p>It is also expected to provide live EEG signal and live noise level information, like the previous ones.</p>
</div>
</div>
<div class="section" id="channel-scenarios">
<h4><a class="toc-backref" href="#id43">8 channel scenarios</a><a class="headerlink" href="#channel-scenarios" title="Permalink to this headline">¶</a></h4>
<p>8 channel scenarios has to forward live EEG channels from 5 to 8 via additional VRPN Analog Server called <strong>liveEEG_5_8</strong> like that:</p>
<img alt="_images/LiveEEGWith8Channels.png" src="_images/LiveEEGWith8Channels.png" />
</div>
<div class="section" id="adding-scenario-groups">
<h4><a class="toc-backref" href="#id44">Adding scenario groups</a><a class="headerlink" href="#adding-scenario-groups" title="Permalink to this headline">¶</a></h4>
<p>You can create new scenarios in OpenViBE designer. Just create <em>*.xml</em> file with scenario and modify it. More information about creating simple scenario you find on official OpenViBE site at: <a class="reference external" href="http://openvibe.inria.fr/documentation-index/#User+Documentation">http://openvibe.inria.fr/documentation-index/#User+Documentation</a></p>
<img alt="_images/OpenvibeDesinger.PNG" class="align-center" src="_images/OpenvibeDesinger.PNG" />
</div>
</div>
</div>
<div class="section" id="supported-eeg-devices">
<span id="id3"></span><h2><a class="toc-backref" href="#id45"><strong>Supported EEG Devices</strong></a><a class="headerlink" href="#supported-eeg-devices" title="Permalink to this headline">¶</a></h2>
<div class="section" id="starlab-enobio">
<h3><a class="toc-backref" href="#id46"><strong>Starlab® Enobio</strong></a><a class="headerlink" href="#starlab-enobio" title="Permalink to this headline">¶</a></h3>
<div class="section" id="general-information">
<h4><a class="toc-backref" href="#id47">General Information</a><a class="headerlink" href="#general-information" title="Permalink to this headline">¶</a></h4>
<p>Enobio® is a wearable, modular and wireless electro-physiology sensor system for the recording of EEG, ECG and EOG. Enobio® has 4 channels, bandwidth from 0 to 125 Hz and wireless (IEEE 802.15.4) communication. More information about Enobio® you find in manual or on <a class="reference external" href="http://starlab.es/products/enobio">http://starlab.es/products/enobio</a></p>
</div>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id48">Installation</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This information are for Enobio® 2.0</p>
</div>
<p>Plug in the USB disk from Enobio® to the computer. You find there Enobio® 2.0 User Manual and Enobio® 2.0 Quick Start Guide. Plug in the USB port wireless receiver.</p>
<p>If the drivers will not install automatically. Install it from Device Manager (My Computer -&gt; Properties -&gt; Device Manager). Find new device on the list and update driver choosing folder <em>usb_drivers</em> on Enobio® USB disk.</p>
<p>Enobio® device now is ready to work with CENT application.</p>
</div>
</div>
<div class="section" id="other-eeg-devices">
<h3><a class="toc-backref" href="#id49"><strong>Other EEG Devices</strong></a><a class="headerlink" href="#other-eeg-devices" title="Permalink to this headline">¶</a></h3>
<p>CENT Application is able to use different EEG Devices, as long as those are supported by OpenViBE platform. In other case, new drivers can be developped. See brief overview of the drivers development in <a class="reference internal" href="#eeg-cap-drivers-development"><em>EEG Cap Drivers Development</em></a> section.</p>
</div>
</div>
<div class="section" id="how-acquisition-server-collect-samples">
<h2><a class="toc-backref" href="#id50"><strong>How Acquisition Server collect samples</strong></a><a class="headerlink" href="#how-acquisition-server-collect-samples" title="Permalink to this headline">¶</a></h2>
<p>Happy scenario is that the cap provides 250 samples per second times four channels and all the Acquisition Server has to do is to push it forward to Designer. Yeah that almost never happens. There are many reasons from computer being stuck at something (even for 100ms is bad) to many kinds of noise (environmental or due to patient fault, like skin movement).</p>
<p>When something bad happens with the sample, Enobio cap flags that sample as &#8220;LOST PACKET&#8221;. Our driver ignores those packets.</p>
<p>In the Acquisition Server that situation is called a drift (it can happen both ways: too many or too little data). To guarantee 250Hz it adds interpolated samples to the sending buffer. The best thing about it, is that it flags samples also with stimulations: OVTK_GDF_Correct and OVTK_GDF_Incorrect. You can see them in SigViewer when you open any GDF file written by CENT.</p>
<img alt="_images/SigViewer.PNG" class="align-center" src="_images/SigViewer.PNG" />
<p>There are this pink vertical lines (stimulations) and the first stands for Incorrect and the second Correct one. What is between them is interpolated by Acquisition Server, so nothing random.</p>
<p>Conclusion is that if you want to be super accurate you can take those stimulations into account when processing signal in OV Designer. I don&#8217;t think you have to worry about that but wanted you to know a little bit about the under the hood stuff.</p>
</div>
<div class="section" id="patient-data-storage">
<span id="id5"></span><h2><a class="toc-backref" href="#id51"><strong>Patient data storage</strong></a><a class="headerlink" href="#patient-data-storage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id52"><strong>General information</strong></a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>All patient data is stored under <tt class="docutils literal"><span class="pre">C:\Users\[username]\Documents\CENT\Patients</span></tt>. Under every patients&#8217; obfuscated folder are folders for every session. Session folder name has an embedded date and time. For example <tt class="docutils literal"><span class="pre">session_20120519183421</span></tt> Is a session recorded on 19/05/2012 at 18:34.21.
Next to the sessions&#8217; folders is an IEP folder put there by CENT on patient creation. The therapist has to provide a valid original IEP folder for this functionality to work.</p>
</div>
<div class="section" id="privacy-security-and-it-s-limitations">
<h3><a class="toc-backref" href="#id53"><strong>Privacy security and it&#8217;s limitations</strong></a><a class="headerlink" href="#privacy-security-and-it-s-limitations" title="Permalink to this headline">¶</a></h3>
<p>Every patient&#8217;s folder name is obfuscated for privacy reasons. However there are some limitations to that. When thinking about privacy of patient&#8217;s information one needs to be aware that a clever user with access to CENT system and it&#8217;s folder structure can still figure out which folders belong to which patients.</p>
<p>Simplest way to go around this protection is to click &#8220;save as&#8221; option in notepad when it has <tt class="docutils literal"><span class="pre">session_notes.txt</span></tt> open for current patient. Another approach would be to check timestamps of the session folders. Knowing when a patient recorded his or hers session it&#8217;s easy to guess which folder is who&#8217;s.</p>
<p>The solution (obfuscated folder name) is a good approach covering basic privacy rules. It&#8217;s architecture is based on known usage patterns for CENT system. Authors of the software do not take responsibility for an incorrect or improper use of the software.</p>
</div>
</div>
<div class="section" id="added-functionality-for-trainers">
<span id="added-func-train"></span><h2><a class="toc-backref" href="#id54"><strong>Added Functionality for Trainers</strong></a><a class="headerlink" href="#added-functionality-for-trainers" title="Permalink to this headline">¶</a></h2>
<p><em>by Ben Cowley</em></p>
<div class="section" id="recap-visualisations">
<h3><a class="toc-backref" href="#id55"><strong>Recap Visualisations</strong></a><a class="headerlink" href="#recap-visualisations" title="Permalink to this headline">¶</a></h3>
<p>The Tools menu in the Trainer&#8217;s window contains the &#8216;Recap Tool&#8217;. This is a deployed Matlab application and will take some time to process: between 3-7 minutes. When called, the CENT platform passes two arguments to <em>CENTrecap.exe</em>: the env var <strong>CENT_CURRENT_SESSION</strong> and an integer which specifies which set of results to display (currently this is always the first set relating to scores, as EEG-data processing requires more work to build into the deployed version of Matlab).
Several windows will be output, the most useful of which is the adjusted session scores for this patient:</p>
<img alt="_images/AdjustedSessionScores.png" class="align-center" src="_images/AdjustedSessionScores.png" />
<dl class="docutils">
<dt>To run the CENTrecap add-on you will need to install Matlab Compiler Runtime (MCR) version 7.17 (R2012a). Obtain it from</dt>
<dd><a class="reference external" href="http://www.mathworks.com/products/compiler/">http://www.mathworks.com/products/compiler/</a></dd>
</dl>
</div>
<div class="section" id="reject-game-trial">
<h3><a class="toc-backref" href="#id56"><strong>Reject Game Trial</strong></a><a class="headerlink" href="#reject-game-trial" title="Permalink to this headline">¶</a></h3>
<p>The Tools menu also contains the function <em>&#8216;Mark This Trial As Bad&#8217;</em>. This allows the trainer to quickly add a text file to the <strong>CENT_CURRENT_GAME</strong> folder which is titled <em>&#8216;trainer_says_no&#8217;</em> - this will indicate to any post-processing code (such as <em>CENTrecap.exe</em>) that this trial should be ignored.</p>
</div>
</div>
</div>
<div class="section" id="cent-application-developer-s-documentation">
<h1><a class="toc-backref" href="#id57">CENT Application - Developer&#8217;s Documentation</a><a class="headerlink" href="#cent-application-developer-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="cent-zip-packages">
<span id="cent-package"></span><h2><a class="toc-backref" href="#id58"><strong>CENT ZIP Packages</strong></a><a class="headerlink" href="#cent-zip-packages" title="Permalink to this headline">¶</a></h2>
<p>We provide two zip packages:</p>
<ul class="simple">
<li>CENTPackage.zip</li>
<li>CENTSources.zip</li>
</ul>
<p>In CENTPackages are: Installer, Mapping Tool, Documentation, GameTutorial and CENTrecap.</p>
<p>In CENTSources are all sources to build CENT application.</p>
<p>To build Cent system you will also need 3rd party packages. They are widely available as open source programs on their websites (with information on the version we used):</p>
<ul class="simple">
<li><a class="reference external" href="http://qwt.sourceforge.net/">http://qwt.sourceforge.net/</a> (version 6.0.1)</li>
<li><a class="reference external" href="http://www.cs.unc.edu/Research/vrpn/">http://www.cs.unc.edu/Research/vrpn/</a> (version 07.29)</li>
<li><a class="reference external" href="http://openvibe.inria.fr/">http://openvibe.inria.fr/</a> (version 0.12.0-svn3107)</li>
</ul>
<p>For unit tests you will also need visual leak detector:</p>
<ul class="simple">
<li><a class="reference external" href="http://vld.codeplex.com/">http://vld.codeplex.com/</a> (version 2.1.0)</li>
</ul>
</div>
<div class="section" id="development-environment-setup">
<span id="dev-env-setup"></span><h2><a class="toc-backref" href="#id59"><strong>Development Environment Setup</strong></a><a class="headerlink" href="#development-environment-setup" title="Permalink to this headline">¶</a></h2>
<p><strong>First</strong> note that more exhaustive instructions on <a class="reference internal" href="#build-plat"><em>Building the Platform</em></a>, and users&#8217; <a class="reference internal" href="#build-log"><em>Build Logs</em></a>, are available in <a class="reference internal" href="#appendix-a"><em>Appendix A</em></a>.</p>
<div class="section" id="required-software">
<span id="req-soft"></span><h3><a class="toc-backref" href="#id60"><strong>Required Software</strong></a><a class="headerlink" href="#required-software" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Qt 4.8 SDK (install to <em>C:Qt4.8.3</em>)</li>
<li>Qt mobility (needed for <a class="reference internal" href="#installer-build"><em>Installer Build</em></a>)</li>
<li>Microsoft Visual Studio 2010</li>
<li>OpenViBE software source codes</li>
<li>Qwt sources</li>
<li>Matlab (only for compiling <em>CENTrecap.m</em>)</li>
</ul>
</div>
<div class="section" id="required-system-variables">
<span id="req-sys-vars"></span><h3><a class="toc-backref" href="#id61"><strong>Required System Variables</strong></a><a class="headerlink" href="#required-system-variables" title="Permalink to this headline">¶</a></h3>
<p>Type &#8220;edit env&#8221; to the Windows Start menu to see the existing Environment Variables.</p>
<ul class="simple">
<li><strong>CENT_SDK</strong> - directory where You have checked out/unpacked the SDK for CENT: this is <tt class="docutils literal"><span class="pre">C:\CENT\cent\CENTSystem</span></tt> in our build: <a class="reference internal" href="#build-plat"><em>Building the Platform</em></a>.</li>
<li><strong>VRPN</strong> - path to the VRPN code: in our build this is <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\src\vrpn\</span></tt></li>
<li><strong>OPENVIBE_SRC</strong> - likely to be <tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe</span></tt></li>
<li><strong>WIX</strong> - installation folder for WIX: generally <tt class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\WiX</span> <span class="pre">Toolset</span> <span class="pre">v3.6</span></tt></li>
<li><strong>QMAKESPEC</strong> - in our build <tt class="docutils literal"><span class="pre">C:\QtSDK\Desktop\Qt\4.7.3\msvc2008\mkspecs\win32-msvc2010</span></tt></li>
<li>Add Qt binaries folder and CENTrecap.exe location to the <strong>PATH</strong> system variable</li>
</ul>
</div>
<div class="section" id="getting-the-code">
<span id="get-code"></span><h3><a class="toc-backref" href="#id62"><strong>Getting the Code</strong></a><a class="headerlink" href="#getting-the-code" title="Permalink to this headline">¶</a></h3>
<div class="section" id="getting-the-code-as-an-archive">
<h4><a class="toc-backref" href="#id63"><strong>Getting the code as an archive</strong></a><a class="headerlink" href="#getting-the-code-as-an-archive" title="Permalink to this headline">¶</a></h4>
<p>Final package (including these docs and source code) are available as a ZIP archive from the University&#8217;s CENT team representatives; these sources contain a number of incremental upgrades not part of the BLStream final delivery.</p>
<blockquote>
<div><a class="reference external" href="https://dl.dropbox.com/u/88101646/CENT_software_final_2012_version.7z">https://dl.dropbox.com/u/88101646/CENT_software_final_2012_version.7z</a></div></blockquote>
<p>Last stable deliverable from BLStream is available from:</p>
<blockquote>
<div><a class="reference external" href="https://dl.dropbox.com/u/88101646/CENT_Deliverables_6.11.2012.zip">https://dl.dropbox.com/u/88101646/CENT_Deliverables_6.11.2012.zip</a></div></blockquote>
<p>In either case, logon credentials should not be needed.</p>
</div>
<div class="section" id="checkout-from-git">
<h4><a class="toc-backref" href="#id64"><strong>Checkout from GIT</strong></a><a class="headerlink" href="#checkout-from-git" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Those links work for BLStream employees only.</p>
</div>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">git+ssh://[ACRONYM]&#64;git.blstream.net/project/cent-test.git</span></tt></li>
<li><tt class="docutils literal"><span class="pre">git+ssh://[ACRONYM]&#64;git.blstream.net/project/cent_games.git</span></tt></li>
<li><tt class="docutils literal"><span class="pre">git+ssh://[ACRONYM]&#64;git.blstream.net/project/cent_openvibe.git</span></tt></li>
<li><tt class="docutils literal"><span class="pre">git+ssh://[ACRONYM]&#64;git.blstream.net/project/cent_qwt.git</span></tt></li>
<li><tt class="docutils literal"><span class="pre">git+ssh://[ACRONYM]&#64;git.blstream.net/project/cent_sdk.git</span></tt></li>
<li><tt class="docutils literal"><span class="pre">git+ssh://[ACRONYM]&#64;git.blstream.net/project/cent_vrpn.git</span></tt></li>
</ul>
</div>
</div>
</div>
<div class="section" id="build-instructions">
<h2><a class="toc-backref" href="#id65"><strong>Build Instructions</strong></a><a class="headerlink" href="#build-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="build-cent-qt-application">
<span id="build-cent"></span><h3><a class="toc-backref" href="#id66">Build CENT Qt Application</a><a class="headerlink" href="#build-cent-qt-application" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">First you need to build VRPN from the directory that <strong>VRPN</strong> environment variable is pointing to: Compile by importing the *.sln file to Visual Studio.</p>
</li>
<li><p class="first">Then onto the CENT application. Make the <em>*.pro</em> file into a Visual Studio *.vcxproj file:</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">qmake</span> <span class="pre">-tp</span> <span class="pre">vc</span> <span class="pre">-r</span> <span class="pre">%CENT_SDK%/CENTApplication/CENTapplication.pro</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">Open the *.vcxproj generated solution file in Visual Studio and build (as Release - see <a class="reference internal" href="#build-plat"><em>Building the Platform</em></a>).</p>
</li>
<li><p class="first">Before running remember to put <em>qwt.dll</em> into output directory of CENT system</p>
</li>
</ul>
</div>
<div class="section" id="build-openvibe-on-windows">
<span id="build-ov"></span><h3><a class="toc-backref" href="#id67">Build OpenViBE on Windows</a><a class="headerlink" href="#build-openvibe-on-windows" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is a build guide in Appendix A: <a class="reference internal" href="#ov-and-libs-build"><em>OpenVIBE &amp; Libraries</em></a></p>
</div>
<ul>
<li><p class="first">Download and put the sources of the latest OpenVibe into:</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">Run and wait for install:</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\scripts\win32-install_dependencies.exe</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">Copy:</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\scripts\win32-init_env_command.cmd-skeleton</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">Rename it to:</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\scripts\win32-init_env_command.cmd</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">Run in command line:</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\scripts\win32-init_env_command.cmd</span></tt></p>
<p><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\scripts\win32-build.cmd</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">OpenViBE will be built in:</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\dist\</span></tt></p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="build-an-openvibe-box">
<span id="build-ov-box"></span><h3><a class="toc-backref" href="#id68">Build an OpenViBE Box</a><a class="headerlink" href="#build-an-openvibe-box" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><em>WIP    -       Should this be covered by or linked to Jari&#8217;s documentation??!!</em></p>
</div>
<p>You need to build OpenViBE with the box code inside the plugins folder. The dll with the plugin will be put into:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\dist\share\openvibe-plugins\[your-plugin-path]</span></tt></div></blockquote>
<p>To optimize the build process please refer to the OpenViBE documentation</p>
<p>To see the OpenViBE box in the designer create an <em>openvibe.conf</em> file in <tt class="docutils literal"><span class="pre">C:\Users\[user]</span></tt> and fill with:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">Designer_ShowUnstable</span> <span class="pre">=</span> <span class="pre">true</span></tt></div></blockquote>
</div>
<div class="section" id="build-openvibe-acquisition-server-with-starlab-enobio-driver">
<span id="build-ov-acq-serv"></span><h3><a class="toc-backref" href="#id69">Build OpenViBE Acquisition Server with Starlab® Enobio® Driver</a><a class="headerlink" href="#build-openvibe-acquisition-server-with-starlab-enobio-driver" title="Permalink to this headline">¶</a></h3>
<p>Go to:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\openvibe-applications\acquisition-server</span></tt></div></blockquote>
<p>Then issue command:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">mklink</span> <span class="pre">/D</span> <span class="pre">/J</span> <span class="pre">cent</span> <span class="pre">..\..\..\..\EnobioAcquisitionServer\AcquisitionServer</span></tt></div></blockquote>
<p>Edit previously created <em>win32-init_env_command.cmd</em> and set CENT as a branch to be built. Appropriate line should look like:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">SET</span> <span class="pre">OpenViBE_application_acquisition_server_branch=cent</span></tt></div></blockquote>
<p>Rebuild as usual. You may find it handy to run:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\scripts\win32-generate-vc-proj.cmd</span></tt></div></blockquote>
<p>Which will configure Visual Studio project and drop it to:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\local-tmp/visual</span></tt></div></blockquote>
</div>
<div class="section" id="build-qwt">
<h3><a class="toc-backref" href="#id70">Build Qwt</a><a class="headerlink" href="#build-qwt" title="Permalink to this headline">¶</a></h3>
<p>Download Qwt sources and put them in <tt class="docutils literal"><span class="pre">%CENT_SDK%/SDK/qwt</span></tt>
Import Qt pro file, build, copy <em>qwt.dll</em> to CENT system output dir (don&#8217;t change the <em>*.pro</em> it&#8217;s LGPL)</p>
</div>
<div class="section" id="installer-build">
<span id="id7"></span><h3><a class="toc-backref" href="#id71"><strong>Installer Build</strong></a><a class="headerlink" href="#installer-build" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the CENT platform is rebuilt, the installer must also be rebuilt to update the installation on any Windows machine: if the new *.exe file was simply copied over the old one, the original installation would revert on the next reboot.</p>
</div>
<p>First, you need wxs toolset/addin from microsoft (candle.exe and light.exe) in your path.
You can follow one of these instructions (or both):
<tt class="docutils literal"><span class="pre">http://msdn.microsoft.com/en-us/library/gg513936.aspx</span></tt>
<tt class="docutils literal"><span class="pre">http://wix.sourceforge.net/votive.html</span></tt></p>
<p>The expected result is that you can use <em>candle.exe</em> and <em>light.exe</em> from cmd (for CENT &#8216;create_package&#8217; script to work).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should also be able to use it from Visual Studio (but keep in mind that &#8220;Votive will not work on the Express SKUs of Visual Studio&#8221;). It might be useful for diagnostic purposes.</p>
</div>
<p>You must have built the CENT platform and all CENT games (e.g. see <a class="reference internal" href="#inst-build-log"><em>CENT Installer Build Log</em></a>).</p>
<p>You must download and build qtmobility, and add to <tt class="docutils literal"><span class="pre">%CENT_SDK%\SDK</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be sure to download the &#8216;master&#8217; qtmobility package.</p>
</div>
<p>You must have the <em>merge modules</em> from Visual Studio Professional, e.g. <tt class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Common</span> <span class="pre">Files\Merge</span> <span class="pre">Modules\Microsoft_VC100_CRT_x86.msm</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can get these from the trial version and they will still be usable after expiration of the trial.</p>
</div>
<p>Updates to 3rd party components such as the Enobio API dlls can be done by manually copying the new ones into <tt class="docutils literal"><span class="pre">%CENT_SDK%\output</span></tt>.</p>
<p>The final step is to run a script to build the CENT installer:
<tt class="docutils literal"><span class="pre">CENTSources/cent/CENTSystem/build/create_package.bat</span></tt></p>
<p>Now find the <em>CENTInstaller.msi</em> at <tt class="docutils literal"><span class="pre">%CENT_SDK%\build\output</span></tt></p>
</div>
</div>
<div class="section" id="cent-games-development">
<h2><a class="toc-backref" href="#id72"><strong>CENT Games Development</strong></a><a class="headerlink" href="#cent-games-development" title="Permalink to this headline">¶</a></h2>
<div class="section" id="currently-available-games">
<h3><a class="toc-backref" href="#id73"><strong>Currently Available Games</strong></a><a class="headerlink" href="#currently-available-games" title="Permalink to this headline">¶</a></h3>
<p>Currently are available three games in CENT application:</p>
<div class="section" id="simple-ball-game">
<h4><a class="toc-backref" href="#id74">Simple Ball Game</a><a class="headerlink" href="#simple-ball-game" title="Permalink to this headline">¶</a></h4>
<p>Simple Ball Game - where patient must try to focus to move the ball up and keep it there. The higher the ball goes the better is her/his score.</p>
<img alt="_images/SimpleBallGame.PNG" class="align-center" src="_images/SimpleBallGame.PNG" />
</div>
<div class="section" id="empty-ball-game">
<h4><a class="toc-backref" href="#id75">Empty Ball Game</a><a class="headerlink" href="#empty-ball-game" title="Permalink to this headline">¶</a></h4>
<p>Empty Ball Game - example of game, to show on a list. During this game circle changes color.</p>
<img alt="_images/EmptyBallGame.PNG" class="align-center" src="_images/EmptyBallGame.PNG" />
</div>
<div class="section" id="media-game">
<h4><a class="toc-backref" href="#id76">Media Game</a><a class="headerlink" href="#media-game" title="Permalink to this headline">¶</a></h4>
<p>Media Game - presented image or video files to the patient while obfuscating them with visual noise. Level of obfuscation is calculated on the basis of the changes of EEG signal classification in time.</p>
<img alt="_images/MediaGame.PNG" class="align-center" src="_images/MediaGame.PNG" />
<ul class="simple">
<li>Media Game:</li>
</ul>
<ol class="arabic simple">
<li>shows to the user his current score</li>
<li>shows to the user the current obfuscation level in a visual manner:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>a as varying alpha intensity which ranges from transparent (no obfuscation at maximum high performance) to opaque (total obfuscation at maximum poor performance).</li>
<li>as a clipping view port in the shape of ellipse with neutral colored (palette of gray) screen outside it: the ellipse radius varies in steps depending on recent classifications.</li>
</ul>
</div></blockquote>
<img alt="_images/MediaGameObfuscationAndAlpha.PNG" class="align-center" src="_images/MediaGameObfuscationAndAlpha.PNG" />
<ol class="arabic simple" start="3">
<li>provides settings screen for the therapist</li>
</ol>
<img alt="_images/MediaGameSettings.PNG" class="align-center" src="_images/MediaGameSettings.PNG" />
<ul>
<li><dl class="first docutils">
<dt>Media Game Video or Image mode</dt>
<dd><p class="first last">Playing a video file (of common formats like “.avi”) file (with audio) or image file ( like “.bmp”) in the center of the game screen. Video is obfuscated by alpha based obfuscation using a picture with noise or a solid color layer. Noise transparency is depend on the obfuscation level calculated by the obfuscation algorithm. There is no audio obfuscation. The video file has to be supported by Windows native player and system codecs.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Media Game Blank Mode</dt>
<dd><p class="first last">Blank screen just with all other controls, that are common in all modes (like current score for example).</p>
</dd>
</dl>
</li>
</ul>
<img alt="_images/MediaGameBlankMode.PNG" class="align-center" src="_images/MediaGameBlankMode.PNG" />
<p>All values like alpha levels, Elliptical clipping frame obfuscation can be modified in:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">[CENT_INSTALLED_FOLDER]\plugins\MediaGamePluginData.ini</span></tt></div></blockquote>
<p>Example is shown below:</p>
<div class="highlight-c"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span class="p">[</span><span class="n">General</span><span class="p">]</span>
<span class="n">ConstFactor</span><span class="o">=</span><span class="mi">10</span>
<span class="n">TimeoutObfuscationTimeMs</span><span class="o">=</span><span class="mi">2000</span>
<span class="n">ObfuscationLevels</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="mi">85</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">25</span>
<span class="n">AlphaLevels</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">153</span><span class="p">,</span> <span class="mi">192</span>
<span class="n">WeightArray</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="astrocomet-game">
<h4><a class="toc-backref" href="#id77">AstroComet Game</a><a class="headerlink" href="#astrocomet-game" title="Permalink to this headline">¶</a></h4>
<p>This is an adaptation of an existing commercial game for the CENT system. As such it is probably only available in non-commercial applications of CENT, due to licensing restrictions.
In Astrocomet, the patient controls a &#8216;comet&#8217; which is inside a &#8216;map&#8217; on which appear targets. The comet will fly towards the targets, but speed is controlled by the player - if the comet is too slow the target will disappear before it is struck.</p>
<img alt="_images/Astrocomet.PNG" class="align-center" src="_images/Astrocomet.PNG" />
</div>
</div>
<div class="section" id="tutorial">
<h3><a class="toc-backref" href="#id78"><strong>Tutorial</strong></a><a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h3>
<p>All games in CENT application have tutorial which explains the rules of the game.</p>
</div>
<div class="section" id="location-for-the-games-data">
<h3><a class="toc-backref" href="#id79"><strong>Location for the Games&#8217; Data</strong></a><a class="headerlink" href="#location-for-the-games-data" title="Permalink to this headline">¶</a></h3>
<p>All game results are saved in patient&#8217;s folder in:</p>
<blockquote>
<div><tt class="docutils literal"><span class="pre">My</span> <span class="pre">Documents\CENT\Patients\[OBFUSCATED_PATIENT_NAME]\session_[DATESTAMP]\games\</span></tt></div></blockquote>
<p>There is also saved session summary.</p>
</div>
<div class="section" id="cent-games-api">
<h3><a class="toc-backref" href="#id80"><strong>CENT Games API</strong></a><a class="headerlink" href="#cent-games-api" title="Permalink to this headline">¶</a></h3>
<div class="section" id="general-information-and-requirements">
<h4><a class="toc-backref" href="#id81">General Information and Requirements</a><a class="headerlink" href="#general-information-and-requirements" title="Permalink to this headline">¶</a></h4>
<p>Exemplary CENT games are created with OpenGL and Qt. You can get Qt, SDK and free IDE at <a class="reference external" href="http://qt.nokia.com">http://qt.nokia.com</a>.
There is an API for game developers, providing all needed communication from CENT to game, and back.</p>
</div>
<div class="section" id="cent-interface-for-new-games">
<h4><a class="toc-backref" href="#id82">CENT Interface for New Games</a><a class="headerlink" href="#cent-interface-for-new-games" title="Permalink to this headline">¶</a></h4>
<p>Developers provide an interface to create new games. It is abstract class <em>ICentGamePlugin</em> in <em>ICentGamePlugin.h</em>. It is shown below:</p>
<div class="highlight-c"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef CENT_GAME_PLUGIN_H</span>
<span class="cp">#define CENT_GAME_PLUGIN_H</span>

<span class="c1">// Includes special CENT data types. Data from device.</span>
<span class="cp">#include &quot;CentDataTypes.h&quot;</span>

<span class="cm">/*</span>
<span class="cm">	This virtual class is an interface for new games in CENT application.</span>
<span class="cm">*/</span>
<span class="n">class</span> <span class="n">ICentGamePlugin</span> <span class="o">:</span> <span class="n">public</span> <span class="n">QObject</span>
<span class="p">{</span>
	<span class="n">Q_OBJECT</span>
<span class="nl">public:</span>
	<span class="n">virtual</span> <span class="o">~</span><span class="n">ICentGamePlugin</span><span class="p">()</span> <span class="p">{};</span>

<span class="nl">public:</span>
	<span class="c1">// Returns name of the game. You will see this name on page</span>
	<span class="c1">// in CENT where you can choose a game.</span>
	<span class="n">virtual</span> <span class="n">QString</span> <span class="n">gameName</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="cm">/* This one is called to initialize, create and return game widget ready to start the game</span>
<span class="cm">	*  It is mandatory to be called before gameWidget()</span>
<span class="cm">	*  @return Game Widget if it is ok to start the game, otherwise NULL.</span>
<span class="cm">	*/</span>
	<span class="n">virtual</span> <span class="n">QWidget</span><span class="o">*</span> <span class="n">gameWidget</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// Release Widget, is called prior to unloading the game plugin (this dll)</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">releaseWidget</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// Returns true if settings/configs can be written; returns false otherwise.</span>
	<span class="n">virtual</span> <span class="kt">bool</span> <span class="n">isConfigurable</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">public</span> <span class="n">slots</span><span class="o">:</span>
	<span class="c1">// Called each time when the data comes from device.</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onUserInput</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">DigitalData</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// Called one time. Sets the expected input.</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onExpectedInput</span><span class="p">(</span><span class="k">const</span> <span class="n">CentData</span><span class="o">::</span><span class="n">DigitalData</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// Called each time when the EEG data come from the device.</span>
	<span class="c1">// You can use it to display EEG plot during the game.</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onEEG</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">AnalogData</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// This method starts the game. There you have to restore to the initial</span>
	<span class="c1">// state all variables and also emit gameStarted() signal.</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onStartGame</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// Called when the game is ended from CENT (&quot;End game&quot; button or game time passed).</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onEndGame</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// Called each time when the power data come from device. </span>
	<span class="c1">// You can use it to display power plot during the game.</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onPowerSignal</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">AnalogData</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

	<span class="c1">// This method shows the game settings.</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onShowSettings</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nl">signals:</span>
	<span class="c1">// Copied from onExpectedSignal if not generated by game</span>
	<span class="kt">void</span> <span class="nf">expectedInput</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">DigitalData</span> <span class="n">data</span><span class="p">);</span>

	<span class="c1">// Needed by the observer to start classification</span>
	<span class="kt">void</span> <span class="nf">gameStarted</span><span class="p">();</span>

	<span class="c1">// Decided by the game or called from onEndGame</span>
	<span class="kt">void</span> <span class="nf">gameEnded</span><span class="p">();</span>
<span class="p">};</span>

<span class="n">Q_DECLARE_INTERFACE</span><span class="p">(</span><span class="n">ICentGamePlugin</span><span class="p">,</span> <span class="s">&quot;cent.game.plugin&quot;</span><span class="p">);</span>

<span class="cp">#endif </span><span class="c1">// CENT_GAME_PLUGIN_H</span>
</pre></div>
</td></tr></table></div>
<p>You have to implement virtual methods and slots:</p>
<div class="highlight-c"><div class="highlight"><pre>	<span class="n">virtual</span> <span class="o">~</span><span class="n">ICentGamePlugin</span><span class="p">()</span> <span class="p">{};</span>
	<span class="n">virtual</span> <span class="n">QString</span> <span class="n">gameName</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="n">QWidget</span><span class="o">*</span> <span class="n">gameWidget</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">releaseWidget</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">bool</span> <span class="n">isConfigurable</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onUserInput</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">DigitalData</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onExpectedInput</span><span class="p">(</span><span class="k">const</span> <span class="n">CentData</span><span class="o">::</span><span class="n">DigitalData</span><span class="o">&amp;</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onEEG</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">AnalogData</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onStartGame</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onEndGame</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onPowerSignal</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">AnalogData</span> <span class="n">data</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="n">virtual</span> <span class="kt">void</span> <span class="n">onShowSettings</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="cent-data-structres">
<h4><a class="toc-backref" href="#id83">CENT Data Structres</a><a class="headerlink" href="#cent-data-structres" title="Permalink to this headline">¶</a></h4>
<p>There is also special class <em>CentDataTypes</em> in <em>CentDataTypes.h</em>. It is shown below. This class contain structure for data come from OpenViBE game scenario.</p>
<div class="highlight-c"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp">#ifndef CENT_DATA_TYPES_H</span>
<span class="cp">#define CENT_DATA_TYPES_H</span>

<span class="cp">#include &lt;QMetaType&gt;</span>

<span class="c1">// Structures for data from OpenViBE game scenario</span>
<span class="n">namespace</span> <span class="n">CENT</span>
<span class="p">{</span>
	<span class="k">enum</span> <span class="n">ErrorCode</span>
	<span class="p">{</span>
		<span class="n">Success</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">WrongArgumentError</span><span class="p">,</span>
		<span class="n">NotSelectedCapDrivers</span><span class="p">,</span>
		<span class="n">UnknownError</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="n">namespace</span> <span class="n">CentData</span>
<span class="p">{</span>
	<span class="c1">// Max number of channels</span>
	<span class="k">const</span> <span class="kt">int</span> <span class="n">CHANNEL_MAX</span> <span class="o">=</span> <span class="mi">128</span><span class="p">;</span>

	<span class="c1">//</span>
	<span class="k">enum</span> <span class="n">GameControlStream</span>
	<span class="p">{</span>
		<span class="n">Classification</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">EpochNotifier</span>
	<span class="p">};</span>

	<span class="c1">//</span>
	<span class="k">enum</span> <span class="n">EEGPowerStream</span>
	<span class="p">{</span>
		<span class="n">POWER_THETA_LEVEL</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">POWER_THETA_RANGE</span><span class="p">,</span>
		<span class="n">POWER_BETA_LEVEL</span><span class="p">,</span>
		<span class="n">POWER_BETA_RANGE</span>
	<span class="p">};</span>

	<span class="c1">//</span>
	<span class="k">enum</span> <span class="n">CapDrivers</span>
	<span class="p">{</span>
		<span class="n">CapDriver4thChannels</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
		<span class="n">CapDriver8thChannels</span><span class="p">,</span>
		<span class="n">UnknowCapDriver</span>
	<span class="p">};</span>

	<span class="c1">// Cap drivers structure</span>
	<span class="k">struct</span> <span class="n">CapDriverData</span>
	<span class="p">{</span>
		<span class="n">CapDrivers</span> <span class="n">type</span><span class="p">;</span>
		<span class="n">QString</span>    <span class="n">name</span><span class="p">;</span>
		<span class="n">QString</span>    <span class="n">commandToRun</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="c1">// Timestamp structure</span>
	<span class="k">struct</span> <span class="n">time</span>
	<span class="p">{</span>
		<span class="c1">// Seconds</span>
		<span class="kt">long</span> <span class="n">tv_sec</span><span class="p">;</span>
		<span class="c1">// Miliseconds</span>
		<span class="kt">long</span> <span class="n">tv_usec</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="c1">// Digital data structure </span>
	<span class="c1">// Stimulations sent to CENT from OpenViBE scenario</span>
	<span class="k">struct</span> <span class="n">DigitalData</span>
	<span class="p">{</span>
		<span class="c1">// Timestamp of button press/release</span>
		<span class="k">struct</span> <span class="n">time</span> <span class="n">msg_time</span><span class="p">;</span>
		<span class="c1">// Which button (numbered from zero)</span>
		<span class="kt">int</span> <span class="n">button</span><span class="p">;</span>
		<span class="c1">// Button state (0 = off, 1 = on) </span>
		<span class="kt">int</span> <span class="n">state</span><span class="p">;</span>
	<span class="p">};</span>

	<span class="c1">// Analog data structure</span>
	<span class="c1">// Data of any stream matrix sent to CENT from OpenViBE scenario</span>
	<span class="k">struct</span> <span class="n">AnalogData</span>
	<span class="p">{</span>
		<span class="c1">// Timestamp of analog data</span>
		<span class="k">struct</span> <span class="n">time</span> <span class="n">msg_time</span><span class="p">;</span>
		<span class="c1">// How many channels</span>
		<span class="kt">int</span> <span class="n">num_channel</span><span class="p">;</span>
		<span class="c1">// Analog channel values</span>
		<span class="kt">double</span> <span class="n">channel</span><span class="p">[</span><span class="n">CHANNEL_MAX</span><span class="p">];</span>
	<span class="p">};</span>
<span class="p">};</span>

<span class="n">Q_DECLARE_METATYPE</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">AnalogData</span><span class="p">)</span>
<span class="n">Q_DECLARE_METATYPE</span><span class="p">(</span><span class="n">CentData</span><span class="o">::</span><span class="n">DigitalData</span><span class="p">)</span>

<span class="cp">#endif </span><span class="c1">// CENT_DATA_TYPES_H</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="tutorial-for-cent-games-developers">
<h4><a class="toc-backref" href="#id84">Tutorial for CENT Games Developers</a><a class="headerlink" href="#tutorial-for-cent-games-developers" title="Permalink to this headline">¶</a></h4>
<p>There is an archive <em>CENTGamesTutorial.zip</em> with the exemplary game and its source code. In this package you can find <em>README.txt</em> file with additional information. Besides that all sources and header files contain informative comments helpful during CENT game development.
Additionally a user&#8217;s guide has been written as an internal record for University of Helsinki personnel: <a class="reference internal" href="#game-dev"><em>Game Plugin Development</em></a>.</p>
</div>
<div class="section" id="adding-game-to-cent">
<h4><a class="toc-backref" href="#id85">Adding Game to CENT</a><a class="headerlink" href="#adding-game-to-cent" title="Permalink to this headline">¶</a></h4>
<p>Copy game&#8217;s <em>DLL</em> file to <tt class="docutils literal"><span class="pre">CENT\plugins</span></tt> directory. You can also add game tutorial to <em>CENT\plugins\Tutorials\[GAMENAME]_tutorial\</em>. Tutorial directory must contain a static html page, with  <em>index.html</em> file as a minimum. CENT will automatically recognize new game after the restart.</p>
</div>
</div>
</div>
<div class="section" id="eeg-cap-drivers-development">
<span id="id8"></span><h2><a class="toc-backref" href="#id86"><strong>EEG Cap Drivers Development</strong></a><a class="headerlink" href="#eeg-cap-drivers-development" title="Permalink to this headline">¶</a></h2>
<div class="section" id="overview">
<h3><a class="toc-backref" href="#id87"><strong>Overview</strong></a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>If you have EEG device other than Enobio® and want to use it with CENT, you have to develop new OpenViBE driver. The driver for the OpenViBE acquisition server is an object that interacts with hardware. Server recives information and send them to OpenViBE for processing.
EEG Driver architecture overview is based on Enobio® EEG cap, as described in <a class="reference internal" href="#supported-eeg-devices"><em>Supported EEG Devices</em></a> section.</p>
</div>
<div class="section" id="data-structures">
<h3><a class="toc-backref" href="#id88"><strong>Data Structures</strong></a><a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h3>
<p>The driver works with two kind of data:</p>
<ul class="simple">
<li>header - not change in time, contains identifiers (e.g. information about channels).</li>
<li>buffer - change in time, contains samples of channels.</li>
</ul>
<p>The driver works at different stages of the execution, which should be implemented:</p>
<ul class="simple">
<li>configuration</li>
<li>intialization / uninitialization</li>
<li>acquisition</li>
</ul>
<p>You can use Skeleton-generator provided by OpenViBE to generate all files needed to build the driver.</p>
<p>More information about creating new driver you found on <a class="reference external" href="http://openvibe.inria.fr/tutorial-creating-a-new-driver-for-the-acquisition-server/">http://openvibe.inria.fr/tutorial-creating-a-new-driver-for-the-acquisition-server/</a></p>
</div>
</div>
</div>
<div class="section" id="appendix-a">
<span id="id9"></span><h1><a class="toc-backref" href="#id89">Appendix A</a><a class="headerlink" href="#appendix-a" title="Permalink to this headline">¶</a></h1>
<div class="section" id="building-cent-application-end-user-s-notes">
<h2><a class="toc-backref" href="#id90"><strong>Building CENT Application - End User&#8217;s Notes</strong></a><a class="headerlink" href="#building-cent-application-end-user-s-notes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="building-the-platform">
<span id="build-plat"></span><h3><a class="toc-backref" href="#id91"><strong>Building the Platform</strong></a><a class="headerlink" href="#building-the-platform" title="Permalink to this headline">¶</a></h3>
<p><em>by Teemu Itkonen</em></p>
<div class="section" id="cent-application">
<h4><a class="toc-backref" href="#id92">CENT Application</a><a class="headerlink" href="#cent-application" title="Permalink to this headline">¶</a></h4>
<p>CENT depends on other software, such as VRPN, OpenVibe and Qt and Qwt. Building all the different pieces and putting them together requires some folder juggling and working memory capacity, but all of them are built either by running and tweaking regular batch scripts (which use whatever underlying microsoft magic that they do) or using QMake followed by Visual Studio. QMake is a tool belonging to the Qt SDK, which can create compile instructions for many platforms, e.g. makefiles or visual studio project files. It uses its own project files as input, (labeled *.pro), which can be turned into VS projects with the command <em>&#8220;qmake -tp vc project.pro&#8221;</em>. The *.pri files are something like includes to the *.pro files, and may contain additional information. Especially when adding stuff to the application itself, the new files need to be added to sources.pri. QMake needs to know some things about the platform (see below).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Microsoft Visual Studio Express has some limitations which make it more convenient to build CENT only in &#8216;Release&#8217; mode. Thus if you only have access to the free version of Visual Studio, remember to build everything in &#8220;Release&#8221; mode. See note 4 below.</p>
</div>
<ol class="arabic simple">
<li>Get relevant packages (<a class="reference internal" href="#cent-package"><em>CENT ZIP Packages</em></a>).</li>
<li>Install Qt SDK &amp; Visual C++ 2010 Express (<a class="reference internal" href="#req-soft"><em>Required Software</em></a>).</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You might want to run windows update, at least for the .NET stuff, because of there is a bug in an old version of MSBuild.</p>
</div>
<ol class="arabic" start="3">
<li><p class="first">Unzip everything the package contains to <tt class="docutils literal"><span class="pre">C:\CENT</span></tt>. From now on we&#8217;ll refer to the folder <tt class="docutils literal"><span class="pre">C:\CENT\cent\CENTSystem</span></tt> as %CENT_SDK%, since it will get it&#8217;s own environment variable (<a class="reference internal" href="#req-sys-vars"><em>Required System Variables</em></a>).</p>
<blockquote>
<div><ul class="simple">
<li>Add system variables <strong>CENT_SDK</strong> and <strong>VRPN</strong> as described above.</li>
<li>Add Qt binaries directory <tt class="docutils literal"><span class="pre">C:\QtSDK\Desktop\Qt\4.7.x\msvc2008\bin</span></tt> and visual studio binary directory e.g. <tt class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\Microsoft</span> <span class="pre">Visual</span> <span class="pre">Studio</span> <span class="pre">10.0\VC\bin</span></tt> to system <strong>PATH</strong>.</li>
<li>Add <strong>QMAKESPEC</strong> environment variable for the relevant <em>qmake.conf</em> e.g. <tt class="docutils literal"><span class="pre">C:\QtSDK\Desktop\Qt\4.7.3\msvc2008\mkspecs\win32-msvc2010</span></tt>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Put VRPN source files to <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\src\vrpn</span></tt> and compile by importing the SNL file to Visual Studio (<a class="reference internal" href="#build-cent"><em>Build CENT Qt Application</em></a>).</p>
<blockquote>
<div><ul class="simple">
<li>Run qmake for <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\CENTapplication.pro</span></tt>. Attempt to build it.</li>
</ul>
</div></blockquote>
</li>
</ol>
<dl class="docutils">
<dt>Didn&#8217;t work? Thought so. You might have to do some of the following, or more:</dt>
<dd><ul class="first last simple">
<li>copy vrpn sources to <tt class="docutils literal"><span class="pre">%CENT_SDK%\Common\vrpn</span></tt></li>
<li>copy qwt sources to <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\src\widgets</span></tt></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ol class="last arabic simple">
<li>This part is messy. Some files need to be in the same folders from which they are called, since something gets screwed up and they can&#8217;t be found from the locations they reside in the directory structure. Read the error log, do it the messy way and simply search, copy and paste some headers around. Unfortunately this results in duplicate files. Giving a damn about it is optional.</li>
</ol>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ol class="last arabic simple" start="2">
<li>Same thing with linker dependencies. Check the properties in VS from <em>Project &gt; Properties &gt; Configuration properties &gt; Linker &gt; Input</em>. There might be some oddities there, like &#8220;vrpn.lib&#8221; with no other path information associated. Also remember that when setting the environment variables, visual studio, like other programs, imports them when it starts, so check their existence and restart the software if it can&#8217;t find them.</li>
</ol>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ol class="last arabic simple" start="3">
<li>Also: Disable automatic manifest file generation from <em>Project &gt; Properties &gt; Configuration properties &gt; Linker &gt; Manifest File</em>. Otherwise this will create a Side-by-side error when running the program.</li>
</ol>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ol class="last arabic simple" start="4">
<li>On debugging: For some reason, running a debug build has problems. You can circumvent it by building the application in Release mode and enabling debugging in <em>Project &gt; Properties &gt; Configuration properties &gt; Linker &gt; Generate debugging info</em>. If you need to see the warnings and debug messages in a console window, you have to add the line &#8220;CONFIG += console&#8221; to the CENTApplication.pro file, and rebuild all. It&#8217;s also good to disable code optimization, just remember to reverse this when you&#8217;re done debugging. The optimization scheme that BLStream used is &#8220;Maximize speed&#8221;, under <em>Project &gt; Properties &gt; Configuration properties &gt; C/C++ &gt; Optimisation</em>.</li>
</ol>
</div>
</div>
<div class="section" id="openvibe-libraries">
<span id="ov-and-libs-build"></span><h4><a class="toc-backref" href="#id93">OpenVIBE &amp; Libraries</a><a class="headerlink" href="#openvibe-libraries" title="Permalink to this headline">¶</a></h4>
<p>Follow the OpenVibe instructions in the system documentation (<a class="reference internal" href="#build-ov"><em>Build OpenViBE on Windows</em></a>). This is only a supplement.</p>
<p>Didn&#8217;t work? Try this:</p>
<p>Run <em>win32-init_env_command.cmd</em> in the Visual studio command prompt, not the regular one. It might fail, stating that it can&#8217;t find Visual studio common tools. Take a look at the file specified by the environment variable <strong>VS100COMNTOOLS</strong>. Is it there? Everything looks kosher, still it fails? Do it the caveman way again: Simply find the error message in <em>win32-init_env_command.cmd</em>, and look for the if clause which causes it to appear. Delete the preceding conditional clauses and force it to set the correct variables. If you&#8217;re running Visual Studio 2010, they look like</p>
<ul class="simple">
<li><em>SET VSTOOLS=%VS100COMNTOOLS%vsvars32.bat</em></li>
<li><em>SET VSCMake=Visual Studio 10</em></li>
</ul>
<p>If you created <em>openvibe.conf</em> as directed (<a class="reference internal" href="#build-ov-box"><em>Build an OpenViBE Box</em></a>), and it did not work, try editing the package version at <tt class="docutils literal"><span class="pre">%CENT_SDK%\OpenVibe\dist\share</span></tt>; set: <em>designer_showunstable = true</em>
This is needed in order for some boxes to become available in the designer.</p>
<p>You also need some components, which, when put together, create some very special CENT/OpenVibe/Enobio magic. This part is not in the system documentation:</p>
<ol class="arabic simple">
<li>From the CENTSources package, Copy cent_openvibe to <strong>CENT_SDK</strong></li>
<li>Create system variable <strong>OPENVIBE_SRC</strong> and point to openvibe source</li>
<li>Remove references to git from <em>build\build_openvibe_apps.bat</em>, as we have no access there.</li>
<li>Also remove reference to <em>publish_opensource_code.bat</em> and <em>copy_sources_to_publish.bat</em></li>
<li>Run <em>build_openvibe_apps.bat</em> in visual studio command prompt</li>
<li>Copy everything (two executables and three dlls) from <tt class="docutils literal"><span class="pre">%CENT_SDK%\cent_openvibe\output</span></tt> to <tt class="docutils literal"><span class="pre">%CENT_SDK%\output</span></tt></li>
</ol>
<p>Then the Qwt library:</p>
<ol class="arabic simple">
<li>Put qwt sources to <tt class="docutils literal"><span class="pre">%CENT_SDK%\SDK\qwt</span></tt></li>
<li>Build qwt by running qmake, importing to visual studio and building (as release)</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You might have to build the subfolder &#8220;src&#8221; separately. All that matters is to get the <em>qwt.dll</em>, ignore rest of the errors.</p>
</div>
<ol class="arabic" start="3">
<li><p class="first">Copy <em>qwt.dll</em> to the CENT output folder in <tt class="docutils literal"><span class="pre">%CENT_SDK%\output</span></tt></p>
</li>
<li><p class="first">In addition, CENT needs to know where openvibe is. This is done by adding a registry key to OpenVibe output directory.</p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\CENT\Settings\OpenVibeInstallDir</span></tt></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="installer">
<h4><a class="toc-backref" href="#id94">Installer</a><a class="headerlink" href="#installer" title="Permalink to this headline">¶</a></h4>
<p>Finally, you must run the <a class="reference internal" href="#installer-build"><em>Installer Build</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When all platform build steps (including games) are complete, CENT should have everything it needs to build installer in the <tt class="docutils literal"><span class="pre">%CENT_SDK%\output</span></tt> folder. To double check, try installing CENT from the CENT packages and check what is in the installation folder: everything should be the same.</p>
</div>
</div>
</div>
<div class="section" id="build-logs">
<span id="build-log"></span><h3><a class="toc-backref" href="#id95"><strong>Build Logs</strong></a><a class="headerlink" href="#build-logs" title="Permalink to this headline">¶</a></h3>
<p><em>by Ben Cowley</em></p>
<div class="section" id="cent-platform-build-log">
<h4><a class="toc-backref" href="#id96">CENT Platform Build Log</a><a class="headerlink" href="#cent-platform-build-log" title="Permalink to this headline">¶</a></h4>
<p>For this log and the two below, we&#8217;re using Visual Studio Express 10 (VSE), CENT packages delivered September 2012, and Qt 4.8.3</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>CENT sources unzipped to <tt class="docutils literal"><span class="pre">C:\CENT\</span></tt></dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">C:\CENT\cent\CENTSystem</span></tt> becomes env var <strong>CENT_SDK</strong></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Copy VRPN sources to <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\src</span></tt></dt>
<dd><ul class="first last simple">
<li>this path becomes env var <strong>VRPN</strong></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">other environment variables set: <strong>OPENVIBE_SRC</strong>, <strong>QMAKESPEC</strong></p>
</li>
<li><p class="first">Added QT binaries to System Path: <tt class="docutils literal"><span class="pre">C:\QtSDK\Desktop\Qt\4.7.3\msvc2008\bin;</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>Build <em>vprn.sln</em> in VSE, no fatal errors</dt>
<dd><ul class="first last simple">
<li>build log at <tt class="docutils literal"><span class="pre">%VRPN%\upgradeLog.xml</span></tt></li>
<li>some projects listed as unavailable: Library, Main Server, Other Servers, Tests, Utilities.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">In <tt class="docutils literal"><span class="pre">%CENT_SDK\CENTApplication%</span></tt>, run <em>&#8220;qmake -tp vc -r CENTapplication.pro&#8221;</em> and create <em>*.vcxproj</em> file.</p>
</li>
<li><dl class="first docutils">
<dt>Import *.vcxproj to VSE and build:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>build 1 failed: lacked qwt sources at <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\src\widgets</span></tt></dt>
<dd><ul class="first last simple">
<li>copied from <tt class="docutils literal"><span class="pre">qwt-6.0.2\src</span></tt> and try again:</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>build 2 failed: lacked <em>vrpn.lib</em> at <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\src\vrpn\pc_win32\Debug</span></tt></dt>
<dd><ul class="first last simple">
<li>rebuilt vrpn and try again:</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>build 3 failed: lacked <em>qwtd.lib</em> at <tt class="docutils literal"><span class="pre">%CENT_SDK%\SDK\qwt\lib</span></tt></dt>
<dd><ul class="first last simple">
<li>copied qwt package to <tt class="docutils literal"><span class="pre">%CENT_SDK%\SDK</span></tt>.</li>
<li>ran <em>&#8220;qmake -tp vc -r qwt.pro&#8221;</em> .</li>
<li>import *.sln to VSE and build; try again to build <em>CENTapplication.vcxproj</em></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">build succeeded (note the important instructions are covered above <a class="reference internal" href="#ov-and-libs-build"><em>OpenVIBE &amp; Libraries</em></a>).</p>
</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Configure project properties as in <a class="reference internal" href="#build-plat"><em>Building the Platform</em></a> notes 1-4 above.</p>
</li>
<li><dl class="first docutils">
<dt>Build OpenViBe as per instructions: <a class="reference internal" href="#build-ov"><em>Build OpenViBE on Windows</em></a></dt>
<dd><ul class="first last">
<li><p class="first">run <em>win32-install_dependencies.exe</em>, success</p>
</li>
<li><dl class="first docutils">
<dt>copy and rename <em>win32-init_env_command.cmd</em>, run</dt>
<dd><ul class="first last simple">
<li>1st run failed: force set correct variables (first attempt used exclamation mark delimiters e.g. <em>SET VSTOOLS=!VS100COMNTOOLS!vsvars32.bat</em></li>
<li>2nd run failed: try a reboot.</li>
<li>3rd run failed: reset variables with &#8216;%&#8217; delimiters (as described: <a class="reference internal" href="#ov-and-libs-build"><em>OpenVIBE &amp; Libraries</em></a>)</li>
<li>4th run ok.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>run <em>win32_build.cmd</em></dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>1st run failed: <em>vsvars32.bat</em> throws error: &#8220;Input line too long, syntax incorrect&#8221;.</dt>
<dd><div class="first last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">To fix this I copied the paths: %PATH%, %INCLUDE%, and %LIB% from <em>vsvars.bat</em> to notepad++. I searched manually for duplicate lines and deleted them. Perhaps too many build attempts had written the same paths too many times. With shortened paths, 2nd run succeeded.</p>
</div>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Use VSE to make any desired changes to <em>CENTapplication.sln</em> and debug.</p>
</li>
</ol>
</div>
<div class="section" id="cent-installer-build-log">
<span id="inst-build-log"></span><h4><a class="toc-backref" href="#id97">CENT Installer Build Log</a><a class="headerlink" href="#cent-installer-build-log" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">First read the <a class="reference internal" href="#installer-build"><em>Installer Build</em></a> instructions.</p>
</li>
<li><dl class="first docutils">
<dt>Followed instructions at <tt class="docutils literal"><span class="pre">http://msdn.microsoft.com/en-us/library/gg513936.aspx</span></tt></dt>
<dd><ul class="first last simple">
<li>installed <em>candle.exe</em> and <em>light.exe</em>, added to system path.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Ran <em>%CENT_SDK%\build\create_package.bat</em></dt>
<dd><ul class="first simple">
<li>Discovered CENT games not yet built, see WiX log file below:</li>
</ul>
<div class="last highlight-python"><pre>C:\C3NT\cent\CENTSystem\build&gt;heat dir ..\files\Tutorials -cg CentGamesTutorials
 -var sys.SOURCEFILEDIR -dr PLUGINS -gg  -o ..\files\Tutorials\CentGamesTutorial
s.wxs
Windows Installer Xml Toolset Harvester version 3.6.3303.0
Copyright (C) Outercurve Foundation. All rights reserved.

heat.exe : error HEAT5052 : The directory 'C:\C3NT\cent\CENTSystem\files\Tutoria
ls' could not be found.

********************************************************* FAIL


C:\C3NT\cent\CENTSystem\build&gt;candle  ..\OVScenarios\release\4Channels\CentScena
rios4.wxs ..\OVScenarios\release\8Channels\CentScenarios8.wxs ..\files\Tutorials
\CentGamesTutorials.wxs CENTInstaller.wxs  CentOVDirDlg.wxs CentWixUi_InstallDir
.wxs CentBrowseDlg.wxs CentDataDirDlg.wxs -out output\obj\
candle.exe : error CNDL0103 : The system cannot find the file '..\files\Tutorial
s\CentGamesTutorials.wxs' with type 'Source'.

C:\C3NT\cent\CENTSystem\build&gt;light -ext WixUIExtension.dll output\obj\CentScena
rios4.wixobj output\obj\CentScenarios8.wixobj output\obj\CentGamesTutorials.wixo
bj output\obj\CENTInstaller.wixobj  output\obj\CentOVDirDlg.wixobj output\obj\Ce
ntWixUi_InstallDir.wixobj output\obj\CentBrowseDlg.wixobj output\obj\CentDataDir
Dlg.wixobj -o output\CENTInstaller"".msi
light.exe : error LGHT0103 : The system cannot find the file 'output\obj\CentSce
narios4.wixobj' with type 'Source'.

C:\C3NT\cent\CENTSystem\build&gt;REM msiexec /I output\CENTInstaller.msi /l*v outpu
t\log.txt</pre>
</div>
</dd>
</dl>
</li>
<li><p class="first">Corrected this following the steps below: <a class="reference internal" href="#games-build-log"><em>CENT Games Build Log</em></a></p>
</li>
<li><dl class="first docutils">
<dt>With games built, Qt references updated to 4.8.3 and qtmobility installed, run <em>create_package.bat</em></dt>
<dd><ul class="first simple">
<li>Four fails followed:</li>
</ul>
<div class="highlight-python"><pre>C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(127) : error LGHT0103 : The syst
em cannot find the file '..\\SDK\\qtmobility\\bin\\QtMultimediaKit1.dll'.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(140) : error LGHT0103 : The syst
em cannot find the file '..\\SDK\\qtmobility\\bin\\mediaservice\dsengine.dll'.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(144) : error LGHT0103 : The syst
em cannot find the file '..\\SDK\\qtmobility\\bin\\mediaservice\qtmedia_audioeng
ine.dll'.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(159) : error LGHT0103 : The syst
em cannot find the file '..\\output\\plugins\MediaGamePlugin.dll'.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(54) : error LGHT0103 : The syste
m cannot find the file 'C:\Program Files (x86)\\Common Files\\Merge Modules\\Mic
rosoft_VC100_CRT_x86.msm'.
</pre>
</div>
<ul class="simple">
<li>First, edited <em>CENTInstaller.wxs</em> to match qtmobility directory structure (just search for any reference to qtmobility and make sure paths match your package).</li>
</ul>
<div class="highlight-python"><pre>C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(127) : error LGHT0103 : The syst
em cannot find the file '..\\SDK\\qtmobility\\QtMultimediaKit1.dll'.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(140) : error LGHT0103 : The syst
em cannot find the file '..\\SDK\\qtmobility\\plugins\mediaservice\dsengine.dll'
.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(159) : error LGHT0103 : The syst
em cannot find the file '..\\output\\plugins\MediaGamePlugin.dll'.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(54) : error LGHT0103 : The syste
m cannot find the file 'C:\Program Files (x86)\\Common Files\\Merge Modules\\Mic
rosoft_VC100_CRT_x86.msm'.</pre>
</div>
<ul class="simple">
<li>Second, rebuilt games as <em>Release</em>.</li>
</ul>
<div class="highlight-python"><pre>C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(140) : error LGHT0103 : The sys
em cannot find the file '..\\SDK\\qtmobility\\plugins\mediaservice\dsengine.dll
.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(159) : error LGHT0103 : The sys
em cannot find the file '..\\output\\plugins\MediaGamePlugin.dll'.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(54) : error LGHT0103 : The syst
m cannot find the file 'C:\Program Files (x86)\\Common Files\\Merge Modules\\Mi
rosoft_VC100_CRT_x86.msm'.
</pre>
</div>
<ul class="simple">
<li>Third, copied <em>dsengine.dll</em> from the installation folder of CENT (can&#8217;t find buildable package online).</li>
</ul>
<div class="highlight-python"><pre>C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(140) : error LGHT0103 : The syst
em cannot find the file '..\\SDK\\qtmobility\\plugins\mediaservice\dsengine.dll'
.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(54) : error LGHT0103 : The syste
m cannot find the file 'C:\Program Files (x86)\\Common Files\\Merge Modules\\Mic
rosoft_VC100_CRT_x86.msm'.
</pre>
</div>
<ul class="simple">
<li>Fourth, download and install trial version of Visual Studio Professional to obtain merge modules (can retain <em>*.msm</em> files after trial expires).</li>
</ul>
<div class="highlight-python"><pre>C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(59) : warning LGHT1076 : ICE48:
Directory 'OVINSTALLDIR' appears to be hardcoded in the property table to a loca
l drive.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(60) : warning LGHT1076 : ICE48:
Directory 'PATIENTSDATADIR' appears to be hardcoded in the property table to a l
ocal drive.
C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(127) : warning LGHT1076 : ICE60:
 The file QtMultimediaKit1 is not a Font, and its version is not a companion fil
e reference. It should have a language specified in the Language column.
light.exe : warning LGHT1076 : ICE82: This action SystemFolder_x86_VC.DF495DFD_7
9F6_34DF_BB1E_E58DB5BDCF2C has duplicate sequence number 1 in the table InstallE
xecuteSequence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder_x86_VC.DF495DFD_7
9F6_34DF_BB1E_E58DB5BDCF2C has duplicate sequence number 1 in the table InstallU
ISequence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder_x86_VC.DF495DFD_7
9F6_34DF_BB1E_E58DB5BDCF2C has duplicate sequence number 3 in the table AdminExe
cuteSequence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder_x86_VC.DF495DFD_7
9F6_34DF_BB1E_E58DB5BDCF2C has duplicate sequence number 3 in the table AdminUIS
equence
light.exe : warning LGHT1076 : ICE82: This action SystemFolder_x86_VC.DF495DFD_7
9F6_34DF_BB1E_E58DB5BDCF2C has duplicate sequence number 3 in the table AdvtExec
uteSequence
</pre>
</div>
<ul class="last simple">
<li>Finally, success! Only warnings remain.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Installer is built to <tt class="docutils literal"><span class="pre">%CENT_SDK%\build\output</span></tt></p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To alter any static elements of the built Installer, you need to manually change them in <tt class="docutils literal"><span class="pre">%CENT_SDK%\output</span></tt>, which is an exact replica of the installation folder the installer will create. So any extra games (like Astrocomet, which we don&#8217;t build ourselves), or hardware APIs (like <em>Enobio3GAPI.dll</em> which was updated in summer 2012) can just be placed here by copy&amp;paste. You can also change the <em>*.ini</em> files to alter initial settings for games like MediaGame or Astrocomet.</p>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="cent-games-build-log">
<span id="games-build-log"></span><h4><a class="toc-backref" href="#id98">CENT Games Build Log</a><a class="headerlink" href="#cent-games-build-log" title="Permalink to this headline">¶</a></h4>
<p>Before building the installer, the games need to be built with their dependencies - in practice this was not done in correct order so the log reflects how problems were discovered.</p>
<ol class="arabic">
<li><p class="first">From CENT sources package, move cent_games to <tt class="docutils literal"><span class="pre">%CENT_SDK%\</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>For each game, go to the game folder e.g. <tt class="docutils literal"><span class="pre">%CENT_SDK%\cent_games\EmptyBallGamePlugin</span></tt> and do</dt>
<dd><ul class="first last simple">
<li><em>qmake -tp vc -r {game_name}.pro</em></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Go up one level and qmake <em>GamePlugins.pro</em>.</p>
</li>
<li><dl class="first docutils">
<dt>Import the generated *.sln file to VSE and build</dt>
<dd><ul class="first">
<li><dl class="first docutils">
<dt>build failed for MediaGame only:</dt>
<dd><ul class="first last simple">
<li>can&#8217;t find headers <em>qabstractvideosurface.h</em></li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">run <em>create_package.bat</em> again (it gives good diagnostics):</p>
</li>
</ul>
<div class="highlight-python"><pre>C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(95) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\QtCore4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(99) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\QtGui4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(103) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\QtOpenGL4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(107) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\QtSvg4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(111) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\QtWebKit4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(115) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\phonon4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(119) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\QtXml4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(123) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\bin\\QtNetwork4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(127) : error LGHT0103 : The system cannot find the file '..\\SDK\\qtmobility\\bin\\QtMultimediaKit1.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(133) : error LGHT0103 : The system cannot find the file 'C:\\Qt\\4.8.0\\plugins\\imageformats\qjpeg4.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(140) : error LGHT0103 : The system cannot find the file '..\\SDK\\qtmobility\\bin\\mediaservice\dsengine.dll'.C:\C3NT\cent\CENTSystem\build\CENTInstaller.wxs(144) : error LGHT0103 : The system cannot find the file '..\\SDK\\qtmobility\\bin\\mediaservice\qtmedia_audioengine.dll'.</pre>
</div>
<ul class="last">
<li><dl class="first docutils">
<dt>So, <em>%CENT_SDK%\build\CENTInstaller.wxs</em> has the wrong defines for Qt - we have installed 4.8.3</dt>
<dd><ul class="first last simple">
<li>Manually edit the defines</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>No qtmobility package installed?</dt>
<dd><ul class="first simple">
<li>Download qt mobility opensource 1.2.0, unpack and see INSTALL.txt</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Recent checking suggests qtmobility may have been packaged with QtSDK?</p>
</div>
<ul class="simple">
<li>Install ActivePerl for Windows as prerequisite</li>
<li>Follow installation.html build instructions:</li>
<li><em>C:\QtMobility&gt; configure -prefix %CENT_SDK%\SDK</em></li>
<li><em>C:\QtMobility&gt; nmake</em></li>
<li>FAIL</li>
</ul>
<div class="last highlight-python"><pre>dsvideowidgetcontrol.cpp
c:\users\admin_cent\downloads\qt-mobility-opensource-src-1.2.0\plugins\multimedi
a\directshow\camera\dscamerasession.h(68) : fatal error C1083: Cannot open inclu
de file: 'qedit.h': No such file or directory
Generating Code...
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\BIN\cl.EXE"' : return code '0x2'
Stop.
</pre>
</div>
</dd>
</dl>
</li>
<li><p class="first">First downloaded package failed! But we found a fix at <a class="reference external" href="http://qtcentre.org/threads/49862-build-qtmobility-1-2-0-with-visual-studio-2008/">http://qtcentre.org/threads/49862-build-qtmobility-1-2-0-with-visual-studio-2008/</a></p>
</li>
<li><p class="first">As per suggested fix, download &#8216;master version&#8217; of package (does not contain its own installation.html, using first copy)</p>
</li>
<li><dl class="first docutils">
<dt>Unpack to <tt class="docutils literal"><span class="pre">C:\QtMobility</span></tt> (first delete original), build again:</dt>
<dd><ul class="first last simple">
<li><em>C:\QtMobility&gt; configure -prefix %CENT_SDK%\SDK\qtmobility</em></li>
<li><em>C:\QtMobility&gt; nmake</em></li>
<li><em>C:\QtMobility&gt; nmake install</em></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Rebuild MediaGame</dt>
<dd><ul class="first simple">
<li>Fail, linking errors</li>
<li>Edit <em>%CEND_SDK%\cent_games\MediaGamePlugin\MediaGamePlugin.pro</em> to add <strong>all</strong> subdirectories at <tt class="docutils literal"><span class="pre">%CEND_SDK%\SDK\qtmobility\include</span></tt></li>
</ul>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This step might be required because we are building outside of a dedicated build environment (such as BLStream worked in), thus some linkages are required to be manually configured.</p>
</div>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">With all games successfully built, go back to <em>%CEND_SDK%\cent_games\GamePlugins.sln</em> in VSE and build.</p>
</li>
<li><p class="first">Copy <tt class="docutils literal"><span class="pre">%CEND_SDK%\cent_games\Tutorials</span></tt> to <tt class="docutils literal"><span class="pre">%CEND_SDK%\files\Tutorials</span></tt> for Installer linking.</p>
</li>
<li><p class="first">Now return to <a class="reference internal" href="#inst-build-log"><em>CENT Installer Build Log</em></a>.</p>
</li>
</ol>
</div>
<div class="section" id="enobio-api-build-log">
<span id="enoapi-build-log"></span><h4><a class="toc-backref" href="#id99">Enobio API Build Log</a><a class="headerlink" href="#enobio-api-build-log" title="Permalink to this headline">¶</a></h4>
<p>If you have new hardware and the hardware APIs have been updated by Neuroelectrics, it might be important to update your <em>*.dll</em> files.
1. Download the latest API from <a class="reference external" href="http://neuroelectrics.com/support/download">http://neuroelectrics.com/support/download</a>
2. Unpack and copy the sources and libs to the relevant places in <tt class="docutils literal"><span class="pre">%CENT_SDK%\cent_openvibe</span></tt>
3. Build with <em>%CENT_SDK%\cent_openvibe\build\build_openvibe_apps.bat</em>
4. Copy updated <em>Enobio3GAPI.dll</em> from <tt class="docutils literal"><span class="pre">%CENT_SDK%\cent_openvibe\output</span></tt> to <tt class="docutils literal"><span class="pre">%CENT_SDK%\output</span></tt>
5. Rebuild CENT installer.</p>
</div>
</div>
</div>
</div>
<div class="section" id="appendix-b">
<span id="id10"></span><h1><a class="toc-backref" href="#id100">Appendix B</a><a class="headerlink" href="#appendix-b" title="Permalink to this headline">¶</a></h1>
<div class="section" id="developing-for-cent-end-user-s-notes">
<h2><a class="toc-backref" href="#id101"><strong>Developing for CENT - End User&#8217;s Notes</strong></a><a class="headerlink" href="#developing-for-cent-end-user-s-notes" title="Permalink to this headline">¶</a></h2>
<p><em>by Teemu Itkonen</em></p>
<div class="section" id="game-plugin-development">
<span id="game-dev"></span><h3><a class="toc-backref" href="#id102"><strong>Game Plugin Development</strong></a><a class="headerlink" href="#game-plugin-development" title="Permalink to this headline">¶</a></h3>
<p>The basis of CENT plugins is the <em>ICentGamePlugin.h</em>, which is an interface class that lays out how CENT interacts with all of its games. You can look for it in the <em>cent_games</em> source directory, or by opening my plugin project in Visual Studio, which contains it. ICentGamePlugin is the only thing that a plugin needs to realize, the rest can be done with whatever methods you prefer, although switching programming language to something else than C++ is probably quite difficult.</p>
<p>I&#8217;ve left a template to work with in <tt class="docutils literal"><span class="pre">C:\CENT\cent_games\MusicPlayerPlugin\MusicPlayerPlugind.sln</span></tt> (on the CENT laptop), with the trouble of setting things up already sorted out. It is essentially Simple Ball Game with different class names and can be debugged with the usual methods.</p>
<p>Things have changed from the version we saw in June. The plugin interface is different, and there has been some code refactoring in the games. The Simple Ball Game looks different and more complicated now than before. It&#8217;s still probably a good idea to take it as a basis for the Music Player. Seems like it&#8217;s now close to a model-view-presenter pattern, where the three components are the main class (realizes the interface and contains the others as class members), the &#8220;logic&#8221; class (contains rules on game behaviour) and the &#8220;game widget&#8221; class (a customized Qt/OpenGL widget that handles drawing the screen). ICentGamePlugin now requires at least one object to act as a &#8220;game widget&#8221;, and redrawing the game screen has moved away from the interface class. SBG now makes signal-slot connections between the logic class and game widget to let the drawing party know when the screen needs to update.</p>
<p>Lacking time and enthusiasm for redoing things, I&#8217;d say it&#8217;s best to use this pattern. This would mean minimal changes to the plugin class, rewrite the game logic and put the audio playing stuff to the game widget. But lacking proper experience, this is not a very light task. Just playing a sound in this context could, as I experienced, prove to be a non-trivial thing. There is little I can write in this documentation which would be of any practical use in this respect. For sound playback, you might want to take a look at the QMediaPlayer class, which is used in the media game, or the popular Phonon API. For referencing media files in the code CENT uses the Qt resource system.</p>
<div class="section" id="setting-up-a-plugin-development">
<h4><a class="toc-backref" href="#id103">Setting up a plugin development</a><a class="headerlink" href="#setting-up-a-plugin-development" title="Permalink to this headline">¶</a></h4>
<p>Just like with the other stuff, it&#8217;s a bit hazy what exactly was the original intention on how to build the games. All the required infomation is in the .pro and .pri files, but some things, like QMake variables, are supposed to be defined heaven knows where. First, make sure the cent_games directory is located under <tt class="docutils literal"><span class="pre">C:\CENT\cent\CENTSystem</span></tt>. This way the relative paths fit the overall scheme, and the plugins will appear under the same output folder as the application itself (<tt class="docutils literal"><span class="pre">../CENTSystem/output/plugins</span></tt>). Easiest way is again to just copy an existing game, change all the file names (also in the project files) and try to run QMake. It will give out warnings on what files it couldn&#8217;t locate. Adding the following variable definitions to (e.g.) <em>MusicPlayerPlugin.pro</em> does the trick (paths correct on our laptop):</p>
<ul class="simple">
<li><strong>CENT_COMMON_INTERFACES</strong> = <tt class="docutils literal"><span class="pre">C:/CENT/cent/CENTSystem/Common/Interfaces</span></tt></li>
<li><strong>CENT_COMMON</strong> = <tt class="docutils literal"><span class="pre">C:/CENT/cent/CENTSystem/Common</span></tt></li>
</ul>
<p>BLStream plugins now seem to carry version and copyright information with them. The version info is supposed to come from an environment variable, which is generated after something gets fetched from BLStream&#8217;s GIT repository. This doesn&#8217;t happen, and it causes building a plugin to crash. The solution is to go to <em>GameConfiguration.pri</em> in the plugin dir and comment out <strong>&#8220;RC_FILE = $$PWD/resources/resources.rc&#8221;</strong>, which then ignores version information.</p>
<p>Debugging a dll in visual studio: You can edit and debug the plugin from it&#8217;s own project, but you have to explicitly name the calling executable. Go to <em>Project Properties -&gt; Configuration Properties -&gt; Debugging -&gt; Command</em>. There you should browse for the <em>CENTApplication.exe</em>, which you have already built in it&#8217;s own project. Now when you hit &#8220;debug&#8221;, it will start your version of CENT. If the DLL got created in the right output folder, it appears in the game selection screen, where you can run the plugin with all the fancy debugging stuff you can muster.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">IMPORTANT: As mentioned (<a class="reference internal" href="#build-plat"><em>Building the Platform</em></a>), you have to remember the sorry reality of not being able to build CENT in proper &#8220;debug&#8221; mode. When debugging the plugin, both projects must be set to the same build mode, so you have to make your plugin as a &#8220;release&#8221; version. Then go to project properties and manually enable debugging info and disable code optimization, and remember to reverse them when making a proper release.</p>
</div>
</div>
</div>
<div class="section" id="adding-functionality-via-menu-tools">
<h3><a class="toc-backref" href="#id104"><strong>Adding Functionality via Menu Tools</strong></a><a class="headerlink" href="#adding-functionality-via-menu-tools" title="Permalink to this headline">¶</a></h3>
<div class="section" id="creating-launcher-add-ons-for-cent">
<span id="launcher-addon"></span><h4><a class="toc-backref" href="#id105">Creating &#8216;Launcher&#8217; add-ons for CENT</a><a class="headerlink" href="#creating-launcher-add-ons-for-cent" title="Permalink to this headline">¶</a></h4>
<p>Other applications can be launched from the CENT menu: internal variables like the <strong>CENT_CURRENT_GAME</strong> can be passed to the application to allow parallel functionality while CENT is running: this is the concept of the CENTrecap visualiser.</p>
<p>To add a new menu item, just look at the code for an existing menu item, for instance, RecapLauncher or the native SessionNotesLauncher.
The <em>RecapLauncher.h</em> and <em>RecapLauncher.cpp</em> can just be copied over to newly named files and the relevant names changed. There are changes you need to do to other files, which are outlined below.</p>
<p>Short version (read first):</p>
<ol class="arabic">
<li><p class="first">create your launcher&#8217;s header/source files in the filesystem (take as a template an existing menu item, copy &amp; paste a duplicate)</p>
</li>
<li><p class="first">add the files to <tt class="docutils literal"><span class="pre">%CENT_SDK%\CENTApplication\src\sources.pri</span></tt></p>
</li>
<li><p class="first">run <em>&#8220;qmake -tp vc CENTapplication.pro&#8221;</em></p>
</li>
<li><p class="first">import to visual studio</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This recreates some trouble with linker dependencies (though not too many). See build documentation for help.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">edit, debug and test the relevant stuff, then compile (see long version)</p>
</li>
<li><p class="first">rebuild the CENT installer (<a class="reference internal" href="#installer-build"><em>Installer Build</em></a>).</p>
</li>
</ol>
<p>Long version:</p>
<p>The main layout is created by <em>CentMainWindow.cpp</em>, where the initial menu is also set. However the SessionNotesLauncher (and our RecapLauncher) menu items are created in CentController.cpp, which loads the launchers as class members, sets up the menu and passes the launcher classes to CentActionHandler.cpp. You have to add a few lines to both the header and source files of CentController, just follow the example of SessionNotesLauncher.</p>
<p>In CentActionHandler (*.h/*.cpp), do the same as above, look for occurences of any session notes related lines and duplicate the code with appropriate names. At the very bottom there&#8217;s a method called <strong>endSession()</strong>, but nothing seems to be calling it, so just leave it alone. It could be that it&#8217;s called by some Qt MOC code and it does matter, but come back to it if problems occur. (No problems as of writing this.)</p>
<p>It looks like getting the environment variable <strong>CENT_CURRENT_SESSION</strong> directly is difficult for some reason. But the session notes app also gets the current session path by creating a signal-slot connection where the launcher gets notified of path changes. So we&#8217;ll do it the same way: Go to <strong>CentController::createConnections()</strong> and duplicate the line which concerns the session notes launcher. This, together with the slot <strong>setNewSessionPath()</strong> in the launchers, updates the launcher member variable m_currentSessionPath, which contains the current path information.</p>
<dl class="docutils">
<dt>You also need to go to <strong>MainWindowCommon.h</strong>, which defines the menu item name. Set a constant in the style of</dt>
<dd><ul class="first last simple">
<li><em>const char* const SESSION_NOTES_ACTION_NAME = &#8220;Session Notes&#8221;;</em></li>
</ul>
</dd>
</dl>
<p>That&#8217;s all for the stuff outside the launcher class itself. I think the rest is, if not self-explanatory, at least tangible. For RecapLauncher (because it calls a Matlab-deployed *.exe) we use the variable &#8216;<strong>MATLAB_EXE_NAME</strong>&#8216; for the command to run (just like in the command line). The <strong>setNewSessionPath()</strong> as said above, is a Qt slot that catches the &#8220;session path changed&#8221; signal and updates the variable <strong>m_currentSessionPath</strong>. <strong>setRecapAction()</strong> creates a connection between clicking the menu item and running the <strong>launchMatlabScript()</strong>, which in turn starts the new process and is probably the only thing which you need to touch. Some knowledge of Qt might be required.</p>
<p>In order to manipulate the location of your matlab script, set e.g. <em>CENTRecap.exe</em> as the content of <strong>MATLAB_EXE_NAME</strong> and add its location to the system PATH variable.</p>
</div>
</div>
</div>
<div class="section" id="launcher-add-on-log">
<span id="launch-log"></span><h2><a class="toc-backref" href="#id106"><strong>Launcher Add-on Log</strong></a><a class="headerlink" href="#launcher-add-on-log" title="Permalink to this headline">¶</a></h2>
<p><em>by Ben Cowley</em></p>
<p>A button was added to the CENT Tools menu to launch a deployed Matlab executable.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The executable must be discoverable by CENT - an environment variable must be added to each installation machine, pointing to the <em>*.exe</em>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Arguments passed to the executable are received in string format: numerics must be converted.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The context environment inside the deployed executable is <strong>NOT</strong> the same as it is in Matlab. Use the Matlab function <em>isdeployed()</em> and MEX versions of 3rd party toolbox functions.</p>
</div>
</div>
</div>
<div class="section" id="appendix-c">
<span id="id11"></span><h1><a class="toc-backref" href="#id107">Appendix C</a><a class="headerlink" href="#appendix-c" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general-notes-on-cent-machines-of-hy">
<h2><a class="toc-backref" href="#id108"><strong>General Notes on CENT Machines of HY</strong></a><a class="headerlink" href="#general-notes-on-cent-machines-of-hy" title="Permalink to this headline">¶</a></h2>
<p><em>by Teemu Itkonen</em></p>
<p>There are currently four machines, color coded with yellow, red, green and blue stickers at <em>MCC premises in Malmi</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Each machine was used as personal workstations before the training phase, and the installed software can differ.</p>
</div>
<p>Setting up a machine for training requires the following software:</p>
<ol class="lowerroman simple">
<li>OpenVibe (latest version)</li>
<li>CENT + associated game plugins</li>
<li>Scenario and IEP files</li>
<li>Enobio cap drivers</li>
<li>Python 2.7 + NumPy module</li>
<li>Matlab compiler runtime (MCR) and CENTrecap.exe application</li>
<li>Various .bat files for network backup</li>
</ol>
<p>There are two user accounts on each machine, one that has local admin rights and another which doesn&#8217;t. Only the less privileged account can access the closed network inside the university (&#8220;sisäverkko&#8221; in IT department lingo). This account requires to be cached by Windows in order to log into it. The cache can only hold two accounts, which should not become a problem unless you attempt to make more user accounts. Don&#8217;t do that! If the cache somehow gets cleared, trouble shoot with the hint below <a class="reference internal" href="#cached-acc-trick"><em>Trick for getting a cached W7 account back</em></a>.</p>
<p>The machines that were shipped to Malmi for training were meant to have a backup function provided by the CENT software. Patient data is stored first on a primary data storage location (selected on installation, recommended: <tt class="docutils literal"><span class="pre">C:\HY-Data\IBS_CENT\data</span></tt>) and then backed up to a network drive, which can only be accessed from the university internal network. This works through the non-privileged user account (ibs_cent), from which you can make a VPN connection to the HY network. There are two things that require a secure connection: the &#8220;offline files&#8221; functionality, which enables access to the remote desktop and documents folders, and the network drive, which is mapped by using the &#8220;net use&#8221; command. There is a batch script which automates mapping the drive, you can find it on all machines from <tt class="docutils literal"><span class="pre">C:\hyapps\cent\ibs_cent_map.bat</span></tt>.</p>
<p>Offline files is not a good way to store things, since the remote folders, even after connecting the VPN, take a long time to be accessible. The network drive, as told by the IT department, is mapped synchronously, and network speed can become a bottleneck if software functionality requires constant reading and writing to the drive.</p>
<p>Currently this setup &#8220;almost works&#8221;, see next section.</p>
<div class="section" id="sources-of-trouble-vpn-uac">
<h3><a class="toc-backref" href="#id109"><strong>Sources of trouble: VPN &amp; UAC</strong></a><a class="headerlink" href="#sources-of-trouble-vpn-uac" title="Permalink to this headline">¶</a></h3>
<p>Most of the trouble we&#8217;ve seen with the setup comes down to problems with VPN and access rights. Losing the VPN connection might cause freezes to CENT at critical moments. This is for some reason the case for the OpenVPN software, and quick testing with Junos Pulse seemed to work better. As of writing this, the yellow machine has the Junos Pulse installed. The Pulse MSI package is on the desktop of the CENT laptop.</p>
<p>Second thing that caused a lot of headache was the User Account Control (UAC) feature, which, if left at a high level, can cause processes to be blocked silently, without prompting an administrator password. This feature should be turned off entirely. Also, the backup functionality requires that the user running CENT has write access to the folder where CENT is installed, i.e. <tt class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files</span> <span class="pre">(x86)\CENT</span></tt>. The reason is that CENT uses a tool called <em>Robocopy</em> to achieve the backup, and this produces a log file, hard-coded in CENT to be written to its own installation directory. If the log can&#8217;t be written, <em>Robocopy</em> fails without warning. You can change access rights on the installation folder from the admin account.</p>
<p>New trouble (not yet investigated properly): CENT still freezes (and recovers in a few seconds) while using the network backup. There are files ending with <em>*.test</em> which get constantly written and deleted to the backup location, and as said above, this could be about network speed.</p>
</div>
<div class="section" id="trick-for-getting-a-cached-w7-account-back">
<span id="cached-acc-trick"></span><h3><a class="toc-backref" href="#id110"><strong>Trick for getting a cached W7 account back</strong></a><a class="headerlink" href="#trick-for-getting-a-cached-w7-account-back" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Log in with another user account. Initiate the VPN connection. Next, open command line (cmd.exe) and type</dt>
<dd><ul class="first last simple">
<li>/profile /user:atkk\ibs_cent cmd.exe</li>
</ul>
</dd>
</dl>
<p>This will open a command line window as another user. Next time you log in with e.g. the <em>ibs_cent</em> account, Windows will remember it again, since it was authenticated over a secure connection.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Table of Contents</a></li>
<li><a class="reference internal" href="#cent-application-user-s-documentation">CENT Application - User&#8217;s Documentation</a><ul>
<li><a class="reference internal" href="#system-overview"><strong>System Overview</strong></a><ul>
<li><a class="reference internal" href="#what-is-cent"><strong>What is CENT?</strong></a></li>
<li><a class="reference internal" href="#installation"><strong>Installation</strong></a></li>
<li><a class="reference internal" href="#cent-application-usage"><strong>CENT Application Usage</strong></a><ul>
<li><a class="reference internal" href="#application-start">Application Start</a></li>
<li><a class="reference internal" href="#backup-settings">Backup Settings</a></li>
<li><a class="reference internal" href="#backup-under-the-hood">Backup under the hood</a></li>
<li><a class="reference internal" href="#openvibe-console-output">OpenViBE Console Output</a></li>
<li><a class="reference internal" href="#patient-information-gathering">Patient Information Gathering</a></li>
<li><a class="reference internal" href="#openvibe-scenario-group-selection">OpenViBE Scenario Group selection</a></li>
<li><a class="reference internal" href="#eeg-cap-setup">EEG Cap Setup</a></li>
<li><a class="reference internal" href="#baseline-measurement">Baseline Measurement</a></li>
<li><a class="reference internal" href="#game-selection">Game Selection</a></li>
<li><a class="reference internal" href="#gameplay">Gameplay</a></li>
<li><a class="reference internal" href="#game-summary">Game Summary</a></li>
<li><a class="reference internal" href="#session-summary">Session Summary</a></li>
<li><a class="reference internal" href="#patient-s-evaluation">Patient&#8217;s Evaluation</a></li>
<li><a class="reference internal" href="#end-session">End Session</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-tool"><strong>Mapping Tool</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#openvibe-as-a-digital-signal-processor-in-cent"><strong>OpenViBE as a Digital Signal Processor in CENT</strong></a><ul>
<li><a class="reference internal" href="#how-openvibe-is-used-by-cent-system"><strong>How OpenViBE is used by CENT System?</strong></a></li>
<li><a class="reference internal" href="#protocols-development"><strong>Protocols Development</strong></a><ul>
<li><a class="reference internal" href="#environment-variables"><strong>Environment Variables</strong></a></li>
<li><a class="reference internal" href="#available-scenarios">Available Scenarios</a></li>
<li><a class="reference internal" href="#scenarios-requirements">Scenarios requirements</a><ul>
<li><a class="reference internal" href="#monitoring-and-noise-scenario">Monitoring and noise scenario</a></li>
<li><a class="reference internal" href="#baseline-scenario">Baseline scenario</a></li>
<li><a class="reference internal" href="#generate-configuration-scenario">Generate configuration scenario</a></li>
<li><a class="reference internal" href="#game-scenario">Game scenario</a></li>
</ul>
</li>
<li><a class="reference internal" href="#channel-scenarios">8 channel scenarios</a></li>
<li><a class="reference internal" href="#adding-scenario-groups">Adding scenario groups</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#supported-eeg-devices"><strong>Supported EEG Devices</strong></a><ul>
<li><a class="reference internal" href="#starlab-enobio"><strong>Starlab® Enobio</strong></a><ul>
<li><a class="reference internal" href="#general-information">General Information</a></li>
<li><a class="reference internal" href="#id4">Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-eeg-devices"><strong>Other EEG Devices</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-acquisition-server-collect-samples"><strong>How Acquisition Server collect samples</strong></a></li>
<li><a class="reference internal" href="#patient-data-storage"><strong>Patient data storage</strong></a><ul>
<li><a class="reference internal" href="#id6"><strong>General information</strong></a></li>
<li><a class="reference internal" href="#privacy-security-and-it-s-limitations"><strong>Privacy security and it&#8217;s limitations</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#added-functionality-for-trainers"><strong>Added Functionality for Trainers</strong></a><ul>
<li><a class="reference internal" href="#recap-visualisations"><strong>Recap Visualisations</strong></a></li>
<li><a class="reference internal" href="#reject-game-trial"><strong>Reject Game Trial</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#cent-application-developer-s-documentation">CENT Application - Developer&#8217;s Documentation</a><ul>
<li><a class="reference internal" href="#cent-zip-packages"><strong>CENT ZIP Packages</strong></a></li>
<li><a class="reference internal" href="#development-environment-setup"><strong>Development Environment Setup</strong></a><ul>
<li><a class="reference internal" href="#required-software"><strong>Required Software</strong></a></li>
<li><a class="reference internal" href="#required-system-variables"><strong>Required System Variables</strong></a></li>
<li><a class="reference internal" href="#getting-the-code"><strong>Getting the Code</strong></a><ul>
<li><a class="reference internal" href="#getting-the-code-as-an-archive"><strong>Getting the code as an archive</strong></a></li>
<li><a class="reference internal" href="#checkout-from-git"><strong>Checkout from GIT</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#build-instructions"><strong>Build Instructions</strong></a><ul>
<li><a class="reference internal" href="#build-cent-qt-application">Build CENT Qt Application</a></li>
<li><a class="reference internal" href="#build-openvibe-on-windows">Build OpenViBE on Windows</a></li>
<li><a class="reference internal" href="#build-an-openvibe-box">Build an OpenViBE Box</a></li>
<li><a class="reference internal" href="#build-openvibe-acquisition-server-with-starlab-enobio-driver">Build OpenViBE Acquisition Server with Starlab® Enobio® Driver</a></li>
<li><a class="reference internal" href="#build-qwt">Build Qwt</a></li>
<li><a class="reference internal" href="#installer-build"><strong>Installer Build</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cent-games-development"><strong>CENT Games Development</strong></a><ul>
<li><a class="reference internal" href="#currently-available-games"><strong>Currently Available Games</strong></a><ul>
<li><a class="reference internal" href="#simple-ball-game">Simple Ball Game</a></li>
<li><a class="reference internal" href="#empty-ball-game">Empty Ball Game</a></li>
<li><a class="reference internal" href="#media-game">Media Game</a></li>
<li><a class="reference internal" href="#astrocomet-game">AstroComet Game</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tutorial"><strong>Tutorial</strong></a></li>
<li><a class="reference internal" href="#location-for-the-games-data"><strong>Location for the Games&#8217; Data</strong></a></li>
<li><a class="reference internal" href="#cent-games-api"><strong>CENT Games API</strong></a><ul>
<li><a class="reference internal" href="#general-information-and-requirements">General Information and Requirements</a></li>
<li><a class="reference internal" href="#cent-interface-for-new-games">CENT Interface for New Games</a></li>
<li><a class="reference internal" href="#cent-data-structres">CENT Data Structres</a></li>
<li><a class="reference internal" href="#tutorial-for-cent-games-developers">Tutorial for CENT Games Developers</a></li>
<li><a class="reference internal" href="#adding-game-to-cent">Adding Game to CENT</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#eeg-cap-drivers-development"><strong>EEG Cap Drivers Development</strong></a><ul>
<li><a class="reference internal" href="#overview"><strong>Overview</strong></a></li>
<li><a class="reference internal" href="#data-structures"><strong>Data Structures</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-a">Appendix A</a><ul>
<li><a class="reference internal" href="#building-cent-application-end-user-s-notes"><strong>Building CENT Application - End User&#8217;s Notes</strong></a><ul>
<li><a class="reference internal" href="#building-the-platform"><strong>Building the Platform</strong></a><ul>
<li><a class="reference internal" href="#cent-application">CENT Application</a></li>
<li><a class="reference internal" href="#openvibe-libraries">OpenVIBE &amp; Libraries</a></li>
<li><a class="reference internal" href="#installer">Installer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#build-logs"><strong>Build Logs</strong></a><ul>
<li><a class="reference internal" href="#cent-platform-build-log">CENT Platform Build Log</a></li>
<li><a class="reference internal" href="#cent-installer-build-log">CENT Installer Build Log</a></li>
<li><a class="reference internal" href="#cent-games-build-log">CENT Games Build Log</a></li>
<li><a class="reference internal" href="#enobio-api-build-log">Enobio API Build Log</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-b">Appendix B</a><ul>
<li><a class="reference internal" href="#developing-for-cent-end-user-s-notes"><strong>Developing for CENT - End User&#8217;s Notes</strong></a><ul>
<li><a class="reference internal" href="#game-plugin-development"><strong>Game Plugin Development</strong></a><ul>
<li><a class="reference internal" href="#setting-up-a-plugin-development">Setting up a plugin development</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-functionality-via-menu-tools"><strong>Adding Functionality via Menu Tools</strong></a><ul>
<li><a class="reference internal" href="#creating-launcher-add-ons-for-cent">Creating &#8216;Launcher&#8217; add-ons for CENT</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#launcher-add-on-log"><strong>Launcher Add-on Log</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#appendix-c">Appendix C</a><ul>
<li><a class="reference internal" href="#general-notes-on-cent-machines-of-hy"><strong>General Notes on CENT Machines of HY</strong></a><ul>
<li><a class="reference internal" href="#sources-of-trouble-vpn-uac"><strong>Sources of trouble: VPN &amp; UAC</strong></a></li>
<li><a class="reference internal" href="#trick-for-getting-a-cached-w7-account-back"><strong>Trick for getting a cached W7 account back</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="#">CENT System 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Ben Cowley, Robert Rabenel, Teemu Itkonen, Jari Torniainen.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>